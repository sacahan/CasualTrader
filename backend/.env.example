# ==================== CasualTrader Backend Configuration ====================
# 配置文件說明：本文件包含 CasualTrader 後端服務的所有環境變數設定
# 使用方式：複製此檔案為 .env 並根據實際需求修改相應值

# ==================== OpenAI API ====================
# OpenAI API 金鑰，用於 AI Agent 和模型調用
# 獲取方式：https://platform.openai.com/api-keys
OPENAI_API_KEY="your-openai-api-key-here"

# ==================== GitHub Copilot Integration ====================
# GitHub 個人存取令牌，用於 GitHub Copilot 集成
GITHUB_PERSONAL_ACCESS_TOKEN="your-github-personal-access-token-here"

# ==================== Tavily API ====================
# Tavily API 金鑰，用於市場數據和分析服務
TAVILY_API_KEY="your-tavily-api-key-here"

# ==================== API Server Settings ====================
# FastAPI 服務器配置
API_HOST="0.0.0.0"                                 # 監聽位址 (0.0.0.0 允許外部訪問)
API_PORT=8000                                      # 監聽端口

# ==================== CORS Settings ====================
# 跨域資源共享 (CORS) 配置
# 安全提示：生產環境請設定具體的域名，避免使用 "*"
CORS_ORIGINS='["http://localhost:3000", "http://localhost:5173"]'  # 允許的來源（JSON 陣列格式）
CORS_ALLOW_CREDENTIALS=true                        # 允許發送認證資訊

# ==================== MCP Client Settings ====================
# MCP (Model Context Protocol) 客戶端配置
# CASUAL_MARKET_PATH: casual-market-mcp 的本地路徑（開發時使用）
# 如果不設置，系統將使用已安裝的 casual-market-mcp 包
# CASUAL_MARKET_PATH="/path/to/your/CasualMarket"

# ==================== Logging Settings ====================
# 日誌配置
LOG_LEVEL="INFO"                                   # 日誌級別 (DEBUG/INFO/WARNING/ERROR)
LOG_FILE="logs/api_{time:YYYY-MM-DD}.log"         # 日誌檔案路徑
LOG_ROTATION="500 MB"                              # 日誌輪換大小
LOG_RETENTION="30 days"                            # 日誌保留時間
LOG_COMPRESSION="zip"                              # 日誌壓縮格式

# ==================== Database Settings ====================
# 資料庫配置 (PostgreSQL + AsyncIO)
# 格式: postgresql+asyncpg://username:password@host:port/database
DATABASE_URL="postgresql+asyncpg://username:password@host:port/database"
DATABASE_ECHO=false                                # 是否輸出 SQL 查詢日誌

# PostgreSQL Connection Pool Settings (Optional)
DATABASE_POOL_SIZE=5                               # 連接池大小
DATABASE_MAX_OVERFLOW=10                           # 最大溢出連接數
DATABASE_POOL_TIMEOUT=30                           # 連接超時時間（秒）
DATABASE_POOL_RECYCLE=3600                         # 連接回收時間（秒）

# ==================== Agent Settings ====================
# AI Agent 基本配置
MAX_AGENTS=10                                      # 最大同時執行 Agent 數量（控制併發執行數）
DEFAULT_AI_MODEL="gpt-5-mini"                      # 預設 AI 模型
DEFAULT_INITIAL_CAPITAL=10000000                   # 預設初始資金（新台幣）

# ==================== Agent Execution Settings ====================
# Agent 執行參數配置
DEFAULT_MAX_TURNS=30                               # 主 Agent 最大執行回合數
DEFAULT_AGENT_TIMEOUT=300                          # 主 Agent 執行超時時間（秒），會覆蓋所有 sub-agents
DEFAULT_MODEL_TEMPERATURE=0.7                      # LLM 溫度參數 (0.0-1.0，控制生成多樣性)
SKIP_MARKET_CHECK=false                            # 測試模式：跳過開市時間檢查（true=總是執行，false=僅在交易日執行）
SKIP_AGENT_GRAPH=true                              # 是否跳過生成 Agent 結構圖（true=不生成，false=生成）

# ==================== WebSocket Settings ====================
# WebSocket 連接配置
WS_HEARTBEAT_INTERVAL=30                           # 心跳間隔（秒）
WS_MAX_CONNECTIONS=100                             # 最大連接數

# ==================== Environment ====================
# 運行環境配置
ENVIRONMENT="development"                          # 環境名稱 (development/production)
DEBUG=true                                         # 是否啟用除錯模式
