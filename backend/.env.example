# ==================== CasualTrader Backend Configuration ====================
# 配置文件說明：本文件包含 CasualTrader 後端服務的所有環境變數設定
# 使用方式：複製此檔案為 .env 並根據實際需求修改相應值

# ==================== OpenAI API ====================
# OpenAI API 金鑰，用於 AI Agent 和模型調用
# 獲取方式：https://platform.openai.com/api-keys
OPENAI_API_KEY="your-openai-api-key-here"


# ==================== API Server Settings ====================
# FastAPI 服務器配置
API_HOST="0.0.0.0"                                 # 監聽位址 (0.0.0.0 允許外部訪問)
API_PORT=8000                                      # 監聽端口
API_RELOAD=true                                    # 開發模式自動重載
API_WORKERS=1                                      # Worker 進程數量

# ==================== CORS Settings ====================
# 跨域資源共享 (CORS) 配置
CORS_ORIGINS='["http://localhost:3000", "http://localhost:5173"]'  # 允許的來源（JSON 陣列格式）
CORS_ALLOW_CREDENTIALS=true                        # 允許發送認證資訊

# ==================== Logging Settings ====================
# 日誌配置
LOG_LEVEL="INFO"                                   # 日誌級別 (DEBUG/INFO/WARNING/ERROR)
LOG_FILE="logs/api_{time:YYYY-MM-DD}.log"         # 日誌檔案路徑
LOG_ROTATION="500 MB"                              # 日誌輪換大小
LOG_RETENTION="30 days"                            # 日誌保留時間
LOG_COMPRESSION="zip"                              # 日誌壓縮格式

# ==================== Database Settings ====================
# 資料庫配置 (使用 SQLite + AsyncIO)
DATABASE_URL="sqlite+aiosqlite:///casualtrader.db" # 資料庫連接 URL (相對於 backend 目錄)
DATABASE_ECHO=false                                # 是否輸出 SQL 查詢日誌

# ==================== Agent Settings ====================
# AI Agent 基本配置
MAX_AGENTS=10                                      # 最大同時執行 Agent 數量（控制併發執行數）
DEFAULT_AI_MODEL="gpt-5-mini"                      # 預設 AI 模型
DEFAULT_INITIAL_CAPITAL=1000000                    # 預設初始資金（新台幣）

# ==================== Agent Execution Settings ====================
# Agent 執行參數配置
DEFAULT_MAX_TURNS=30                               # 主 Agent 最大執行回合數
DEFAULT_AGENT_TIMEOUT=300                          # 主 Agent 執行超時時間（秒），會覆蓋所有 sub-agents
DEFAULT_SUBAGENT_MAX_TURNS=15                      # Sub-agent 最大執行回合數

# Agent 循環執行配置
DEFAULT_CYCLE_INTERVAL_MINUTES=5                   # 預設循環間隔（分鐘），控制 OBSERVATION → TRADING → REBALANCING 循環的間隔時間
SKIP_MARKET_CHECK=false                            # 測試模式：跳過開市時間檢查（true=總是執行，false=僅在交易日執行）
AGENT_CYCLE_TIMEOUT=600                            # 單次完整循環的超時時間（秒），防止循環執行過久

# ==================== WebSocket Settings ====================
# WebSocket 連接配置
WS_HEARTBEAT_INTERVAL=30                           # 心跳間隔（秒）
WS_MAX_CONNECTIONS=100                             # 最大連接數

# ==================== Environment ====================
# 運行環境配置
ENVIRONMENT="development"                          # 環境名稱 (development/production)
DEBUG=true                                         # 是否啟用除錯模式
