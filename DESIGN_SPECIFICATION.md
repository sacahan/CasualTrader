# AI è‚¡ç¥¨äº¤æ˜“æ¨¡æ“¬å™¨ - è¨­è¨ˆè¦æ ¼æ›¸

**ç‰ˆæœ¬**: 2.1 (åŸºæ–¼ casual-market-mcp å®Œæ•´åŠŸèƒ½é‡æ§‹)
**æ—¥æœŸ**: 2025-01-10 (æ›´æ–°: 2025-10-06)
**å°ˆæ¡ˆ**: CasualTrader AI Trading Simulator

## ðŸ“ ç‰ˆæœ¬æ›´æ–°èªªæ˜Ž (v2.1)

**é‡å¤§æ›´æ–°**: åŸºæ–¼ casual-market-mcp æä¾›çš„ 21 å€‹å°ˆæ¥­å°ç£è‚¡å¸‚æ•¸æ“šå·¥å…·,å…¨é¢ç°¡åŒ–ç³»çµ±æž¶æ§‹

### æ ¸å¿ƒè®Šæ›´

1. **æ•¸æ“šå±¤å¤§å¹…ç°¡åŒ–** âœ…
   - **ç§»é™¤**: è‡ªå»ºè‚¡åƒ¹çˆ¬èŸ²ã€è²¡å ±è§£æžã€å¸‚å ´æ•¸æ“šæ”¶é›†ç­‰å·¥å…·
   - **æ”¹ç”¨**: casual-market-mcp çš„ 21 å€‹å°ˆæ¥­å·¥å…·(å³æ™‚åƒ¹æ ¼ã€è²¡å ±ã€ç‡Ÿæ”¶ã€ä¼°å€¼ã€å¸‚å ´è³‡é‡‘å‹•å‘ç­‰)
   - **å„ªå‹¢**: æ¸›å°‘ç´„ 60% çš„æ•¸æ“šå±¤é–‹ç™¼å·¥ä½œ,å°ˆæ³¨æ–¼ AI æ™ºèƒ½æ±ºç­–

2. **å°ˆæ¥­ Agent æ•¸æ“šä¾†æºæ˜Žç¢º** âœ…
   - **é‡‘èžç ”ç©¶å“¡ Agent**: ç›´æŽ¥ä½¿ç”¨ casual-market-mcp çš„è²¡å‹™æ•¸æ“šå·¥å…·
   - **æŠ€è¡“åˆ†æžå¸« Agent**: ç›´æŽ¥ä½¿ç”¨ casual-market-mcp çš„äº¤æ˜“æ•¸æ“šå·¥å…·
   - **é¢¨éšªè©•ä¼°å¸« Agent**: ç›´æŽ¥ä½¿ç”¨ casual-market-mcp çš„å¸‚å ´æ•¸æ“šå·¥å…·

3. **å·¥å…·æž¶æ§‹é‡æ–°è¨­è¨ˆ** âœ…
   - **åŸºç¤Žå·¥å…·**: åªä¿ç•™ MCP å®¢æˆ¶ç«¯åŒ…è£ã€æŠ•è³‡çµ„åˆç®¡ç†ã€äº¤æ˜“åŸ·è¡Œå”èª¿
   - **é©—è­‰å·¥å…·**: ç°¡åŒ–ç‚ºäº¤æ˜“æ™‚é–“é©—è­‰(æ•´åˆåˆ°äº¤æ˜“æµç¨‹)
   - **å°ˆæ¥­åˆ†æž**: å…¨éƒ¨ç”±é…ç½®å®Œæ•´ MCP å·¥å…·çš„å°ˆæ¥­ Agent æä¾›

4. **é–‹ç™¼æ™‚ç¨‹å„ªåŒ–** âœ…
   - **åŽŸè¨ˆç•«**: 9+ é€±(å«æ•¸æ“šå·¥å…·é–‹ç™¼)
   - **æ–°è¨ˆç•«**: ~9 é€±(ä½†å·¥ä½œé‡æ¸›å°‘ 40%,å› æ•¸æ“šå·¥å…·å·²å®Œå‚™)
   - **Phase 0 ç§»é™¤**: ç„¡éœ€ Hosted Tools POC(casual-market-mcp å·²é©—è­‰å¯è¡Œ)

### casual-market-mcp æä¾›çš„å®Œæ•´åŠŸèƒ½

**21 å€‹å°ˆæ¥­å·¥å…·æ¶µè“‹**:

- ðŸ“Š å³æ™‚å¸‚å ´æ•¸æ“š(4 tools): è‚¡åƒ¹ã€æŒ‡æ•¸ã€å³æ™‚çµ±è¨ˆ
- ðŸ“ˆ è‚¡ç¥¨äº¤æ˜“æ•¸æ“š(5 tools): æ—¥/æœˆ/å¹´äº¤æ˜“ã€æœˆå‡åƒ¹ã€ä¼°å€¼æ¯”çŽ‡
- ðŸ¢ å…¬å¸è²¡å‹™æ•¸æ“š(5 tools): åŸºæœ¬è³‡æ–™ã€è²¡å ±(è‡ªå‹•ç”¢æ¥­åˆ¥)ã€ç‡Ÿæ”¶ã€è‚¡åˆ©
- ðŸ’° å¸‚å ´è³‡é‡‘å‹•å‘(4 tools): èžè³‡èžåˆ¸ã€å¤–è³‡æŒè‚¡ã€ETF æŽ’å
- ðŸ“… é‡è¦è¡Œäº‹æ›†(1 tool): é™¤æ¬Šæ¯è¡Œäº‹æ›†
- ðŸ”„ æ¨¡æ“¬äº¤æ˜“(2 tools): è²·å…¥/è³£å‡º(å«æ‰‹çºŒè²»è¨ˆç®—)

### æŠ€è¡“æž¶æ§‹å„ªå‹¢

1. **é—œæ³¨é»žåˆ†é›¢**: æ•¸æ“šç²å–(MCP) vs AI æ±ºç­–(Agent)
2. **æ¨™æº–åŒ–å”è­°**: MCP å”è­°ç¢ºä¿æ“´å±•æ€§å’Œç¶­è­·æ€§
3. **æˆæœ¬æœ€å„ªåŒ–**: ç„¡éœ€ç¶­è­·è¤‡é›œçš„çˆ¬èŸ²å’Œæ•¸æ“šè™•ç†é‚è¼¯
4. **å³æ™‚æ€§ä¿è­‰**: æ‰€æœ‰æ•¸æ“šä¾†è‡ª MCP å³æ™‚æŸ¥è©¢
5. **æ˜“æ–¼æ¸¬è©¦**: Mock MCP å›žæ‡‰é€²è¡Œå–®å…ƒæ¸¬è©¦

## ðŸ“‹ å°ˆæ¡ˆæ¦‚è¿°

### ç”¢å“é¡˜æ™¯

æ‰“é€ ä¸€å€‹å³æ™‚ã€å¯è¦–åŒ–çš„ AI è‚¡ç¥¨äº¤æ˜“æ¨¡æ“¬å™¨ï¼Œä½¿ç”¨ OpenAI Agent SDK æ§‹å»ºæ™ºèƒ½äº¤æ˜“ä»£ç†äººï¼Œæ”¯æ´å¤šç¨® AI æ¨¡åž‹åŒæ™‚é€²è¡Œè‚¡ç¥¨äº¤æ˜“ï¼Œæä¾›è§€æˆ°ã€åˆ†æžå’Œå­¸ç¿’çš„å¹³å°ã€‚

### æ ¸å¿ƒåƒ¹å€¼

- **AI ç«¶æŠ€å ´**ï¼šå¤š AI æ¨¡åž‹äº¤æ˜“ç­–ç•¥ç«¶è³½
- **å³æ™‚è§€æˆ°**ï¼šå¯¦æ™‚è§€å¯Ÿ AI æ±ºç­–å’ŒåŸ·è¡ŒéŽç¨‹
- **æ•™è‚²åƒ¹å€¼**ï¼šé€šéŽ AI è¡Œç‚ºå­¸ç¿’æŠ•è³‡ç­–ç•¥
- **ç­–ç•¥åˆ†æž**ï¼šæ¯”è¼ƒä¸åŒæŠ•è³‡æ–¹æ³•çš„æ•ˆæžœ
- **æ™ºèƒ½æ±ºç­–**ï¼šAI ä»£ç†äººåŸºæ–¼å¸‚å ´æ•¸æ“šå’Œç ”ç©¶åˆ†æžé€²è¡Œè‡ªä¸»äº¤æ˜“
- **ç­–ç•¥æŒä¹…åŒ–**ï¼šæŠ•è³‡ç­–ç•¥å’Œæ±ºç­–éŽç¨‹å®Œæ•´è¨˜éŒ„èˆ‡è¿½è¹¤

---

## ðŸŽ¯ åŠŸèƒ½éœ€æ±‚è¦æ ¼

### 1. AI ä»£ç†äººç®¡ç†ç³»çµ± (åŸºæ–¼ OpenAI Agent SDK)

#### 1.1 ä»£ç†äººç”Ÿå‘½é€±æœŸç®¡ç†

- **å‰µå»ºä»£ç†äºº**
  - æ”¯æ´è‡ªå®šç¾©åç¨±ã€ç­–ç•¥é¡žåž‹ã€é¡è‰²ä¸»é¡Œ
  - é è¨­åˆå§‹è³‡é‡‘ï¼šTWD 1,000,000
  - æ”¯æ´çš„ AI æ¨¡åž‹ï¼šGPT-4o-mini, GPT-4o, DeepSeek, Grok, Gemini
  - SQLiteSession æœƒè©±æŒä¹…åŒ–ç®¡ç†

- **ä»£ç†äººç‹€æ…‹æŽ§åˆ¶**
  - å•Ÿå‹•/åœæ­¢äº¤æ˜“
  - æš«åœ/æ¢å¾©æ“ä½œ
  - å‹•æ…‹ç­–ç•¥èª¿æ•´èˆ‡é‡è¨­
  - è³‡é‡‘é‡ç½®
  - äº¤æ˜“æ™‚é–“é©—è­‰ï¼ˆå°ç£é›†ä¸­å¸‚å ´äº¤æ˜“æ™‚é–“ï¼šé€±ä¸€è‡³é€±äº” 09:00-13:30ï¼‰

#### 1.2 Agent å‰µå»ºèˆ‡é…ç½®ç³»çµ±

ç³»çµ±æ”¯æ´å¾žå‰ç«¯å‹•æ…‹å‰µå»º AI Agentï¼Œæ¯å€‹ Agent çš„é…ç½®åŒ…å«ï¼š

- **Agent åç¨±**ï¼šä½¿ç”¨è€…è‡ªå®šç¾©çš„ Agent åç¨±
- **AI æ¨¡åž‹**ï¼šGPT-4o-mini, GPT-4o, DeepSeek, Grok, Gemini
- **ç­–ç•¥ Prompt**ï¼šå®Œå…¨è‡ªè¨‚çš„æŠ•è³‡ç­–ç•¥æè¿°ï¼ˆæ”¯æ´é è¨­æ¨¡æ¿ï¼‰
- **ä¸»é«”é¡è‰²**ï¼šAgent åœ¨å‰ç«¯çš„è­˜åˆ¥è‰²å½©
- **åˆå§‹è³‡é‡‘**ï¼šAgent çš„èµ·å§‹æŠ•è³‡é‡‘é¡

#### 1.3 ç­–ç•¥ Prompt ç³»çµ±

ç­–ç•¥é€éŽç´”æ–‡å­— prompt å®šç¾©ï¼Œæ”¯æ´ï¼š

**Prompt Template ç¯„ä¾‹** (ç”¨æ–¼é‡è¨­å’Œåˆå§‹å€¼)ï¼š

```text
ä½ æ˜¯ä¸€ä½å°ˆæ¥­çš„ç©©å¥åž‹æŠ•è³‡è€…ï¼ŒæŠ•è³‡ç›®æ¨™æ˜¯é•·æœŸç©©å®šå¢žå€¼ï¼Œé¢¨éšªåå¥½è¼ƒä½Žã€‚

æŠ•è³‡åŽŸå‰‡ï¼š
- å„ªå…ˆè€ƒæ…®å¤§åž‹ç¸¾å„ªè‚¡å’Œé‡‘èžè‚¡
- æ³¨é‡å…¬å¸è²¡å‹™ç©©å¥æ€§å’Œè‚¡æ¯é…ç™¼ç´€éŒ„
- é¿å…é«˜æ³¢å‹•æ€§å’ŒæŠ•æ©Ÿæ€§è‚¡ç¥¨
- åˆ†æ•£æŠ•è³‡é™ä½Žé¢¨éšª

æ±ºç­–æ™‚è«‹è€ƒæ…®ï¼š
1. å…¬å¸åŸºæœ¬é¢åˆ†æžï¼ˆè²¡å‹™æŒ‡æ¨™ã€ç‡Ÿæ”¶ç©©å®šæ€§ï¼‰
2. è‚¡æ¯æ®–åˆ©çŽ‡å’Œé…ç™¼ç´€éŒ„
3. ç”¢æ¥­åœ°ä½å’Œç«¶çˆ­å„ªå‹¢
4. ç¶“æ¿Ÿç’°å¢ƒå°è©²ç”¢æ¥­çš„å½±éŸ¿

ä½ çš„æŠ•è³‡çµ„åˆç›®æ¨™æ˜¯ç©©å®šæˆé•·ï¼Œä¿è­·è³‡æœ¬ç‚ºå„ªå…ˆè€ƒé‡ã€‚
```

**å‹•æ…‹ç­–ç•¥èª¿æ•´**ï¼š

- Agent å¯ä»¥æ ¹æ“šå¸‚å ´æƒ…æ³å‹•æ…‹èª¿æ•´ç­–ç•¥
- æ‰€æœ‰ç­–ç•¥è®Šæ›´éƒ½æœƒæŒä¹…åŒ–è¨˜éŒ„
- æä¾›é‡è¨­ç‚ºåˆå§‹ Template çš„åŠŸèƒ½

#### 1.4 Agent å¯¦ä½œæ–¹å¼

```python
from agents import Agent

def create_trading_agent(agent_config: dict):
    """æ ¹æ“šå‰ç«¯é…ç½®å‰µå»º Trading Agent"""

    # å‰µå»º Agent å¯¦ä¾‹
    agent = Agent(
        name=agent_config["name"],
        model=agent_config["ai_model"],
        instructions=agent_config["strategy_prompt"],  # ç›´æŽ¥ä½¿ç”¨ä½¿ç”¨è€…è¼¸å…¥çš„ prompt
    )

    # é…ç½®æ‰€æœ‰å¯ç”¨å·¥å…·ï¼ˆç„¡éœ€é™åˆ¶ï¼‰
    configure_all_tools(agent)

    return agent

def configure_all_tools(agent: Agent):
    """ç‚º Agent é…ç½®æ‰€æœ‰å¯ç”¨å·¥å…·"""
    # æ‰€æœ‰å·¥å…·éƒ½é–‹æ”¾çµ¦ Agent ä½¿ç”¨
    tools = [
        MarketMCPTool(),           # å¸‚å ´æ•¸æ“šèˆ‡äº¤æ˜“
        WebSearchTool(),           # ç¶²è·¯æœå°‹
        ResearchAgentTool(),       # é‡‘èžç ”ç©¶å“¡ Agent
        TimeValidatorTool(),       # äº¤æ˜“æ™‚é–“é©—è­‰
        FundValidatorTool(),       # è³‡é‡‘é©—è­‰
        RiskCalculatorTool(),      # é¢¨éšªè¨ˆç®—
        PortfolioManagerTool(),    # æŠ•è³‡çµ„åˆç®¡ç†
        # æœªä¾†å¯æ“´å±•æ›´å¤š custom tools
    ]

    for tool in tools:
        agent.add_tool(tool)
```

#### 1.5 Agent-to-Tool æž¶æ§‹è¨­è¨ˆ

æŽ¡ç”¨ OpenAI Agent SDK çš„ agent-to-tool åŠŸèƒ½ï¼Œå°‡å°ˆæ¥­åŠŸèƒ½ Agent ä½œç‚ºå·¥å…·æä¾›çµ¦äº¤æ˜“ Agentï¼š

### åŸºç¤Žæ•¸æ“šå·¥å…· (Basic Tools)

#### ðŸ”§ **Casual Market MCP Server** (å·²å¯¦ä½œ - æ ¸å¿ƒæ•¸æ“šå¼•æ“Ž)

casual-market-mcp æä¾›äº†å®Œæ•´çš„å°ç£è‚¡å¸‚æ•¸æ“šå·¥å…·é›†,åŒ…å« 21 å€‹å°ˆæ¥­å·¥å…·:

**ðŸ“Š å³æ™‚å¸‚å ´æ•¸æ“š** (4 tools)

- `get_taiwan_stock_price(symbol)`: å–å¾—è‚¡ç¥¨å³æ™‚åƒ¹æ ¼èˆ‡åŸºæœ¬è³‡è¨Š
- `get_market_index_info(category, count, format)`: å¸‚å ´æŒ‡æ•¸è³‡è¨Š(åŠ æ¬ŠæŒ‡æ•¸ã€é¡žè‚¡æŒ‡æ•¸ç­‰)
- `get_market_historical_index()`: æ­·å²æŒ‡æ•¸è³‡æ–™
- `get_real_time_trading_stats()`: å³æ™‚äº¤æ˜“çµ±è¨ˆ(5åˆ†é˜æ›´æ–°)

**ðŸ“ˆ è‚¡ç¥¨äº¤æ˜“æ•¸æ“š** (5 tools)

- `get_stock_daily_trading(symbol)`: è‚¡ç¥¨æ—¥äº¤æ˜“è³‡è¨Š(æˆäº¤é‡ã€é‡‘é¡ç­‰)
- `get_stock_monthly_trading(symbol)`: è‚¡ç¥¨æœˆäº¤æ˜“è³‡è¨Š
- `get_stock_yearly_trading(symbol)`: è‚¡ç¥¨å¹´äº¤æ˜“è³‡è¨Š
- `get_stock_monthly_average(symbol)`: è‚¡ç¥¨æœˆå¹³å‡åƒ¹æ ¼
- `get_stock_valuation_ratios(symbol)`: è‚¡ç¥¨ä¼°å€¼æ¯”çŽ‡(P/E, P/B, æ®–åˆ©çŽ‡)

**ðŸ¢ å…¬å¸è²¡å‹™æ•¸æ“š** (5 tools)

- `get_company_profile(symbol)`: å…¬å¸åŸºæœ¬è³‡æ–™(ç”¢æ¥­ã€è¦æ¨¡ç­‰)
- `get_company_balance_sheet(symbol)`: è³‡ç”¢è² å‚µè¡¨(è‡ªå‹•åµæ¸¬ç”¢æ¥­åˆ¥)
- `get_company_income_statement(symbol)`: ç¶œåˆæç›Šè¡¨(è‡ªå‹•åµæ¸¬ç”¢æ¥­åˆ¥)
- `get_company_monthly_revenue(symbol)`: å…¬å¸æœˆç‡Ÿæ”¶è³‡è¨Š
- `get_company_dividend(symbol)`: è‚¡åˆ©åˆ†é…è³‡è¨Š

**ðŸ’° å¸‚å ´è³‡é‡‘å‹•å‘** (4 tools)

- `get_margin_trading_info()`: èžè³‡èžåˆ¸è³‡è¨Š
- `get_foreign_investment_by_industry()`: å¤–è³‡æŒè‚¡(æŒ‰ç”¢æ¥­åˆ¥)
- `get_top_foreign_holdings()`: å¤–è³‡æŒè‚¡å‰20å
- `get_etf_regular_investment_ranking()`: ETFå®šæœŸå®šé¡æŽ’å(å‰10å)

**ðŸ“… é‡è¦è¡Œäº‹æ›†** (1 tool)

- `get_dividend_rights_schedule(symbol)`: é™¤æ¬Šæ¯è¡Œäº‹æ›†

**ðŸ”„ æ¨¡æ“¬äº¤æ˜“åŸ·è¡Œ** (2 tools)

- `buy_taiwan_stock(symbol, quantity, price?)`: æ¨¡æ“¬è²·å…¥(æ”¯æ´å¸‚åƒ¹/é™åƒ¹)
- `sell_taiwan_stock(symbol, quantity, price?)`: æ¨¡æ“¬è³£å‡º(æ”¯æ´å¸‚åƒ¹/é™åƒ¹)

**ç‰¹è‰²åŠŸèƒ½**:

- âœ… è‡ªå‹•ç”¢æ¥­åˆ¥åµæ¸¬(ä¸€èˆ¬æ¥­/é‡‘èžæ¥­/è­‰åˆ¸æœŸè²¨æ¥­/é‡‘æŽ§æ¥­/ä¿éšªæ¥­/ç•°æ¥­)
- âœ… æ”¯æ´è‚¡ç¥¨ä»£ç¢¼æˆ–å…¬å¸åç¨±æŸ¥è©¢
- âœ… å®Œæ•´çš„è²¡å‹™å ±è¡¨æ”¯æ´(å«å„ç”¢æ¥­ç‰¹æ®Šæ ¼å¼)
- âœ… å³æ™‚å¸‚å ´è³‡é‡‘å‹•å‘è¿½è¹¤
- âœ… æ‰‹çºŒè²»è‡ªå‹•è¨ˆç®—(0.2% spread)

**ç‹€æ…‹**ï¼šâœ… å·²å¯¦ä½œä¸”åŠŸèƒ½å®Œæ•´

#### ðŸ”§ **WebSearchTool** (å…§å»ºå·¥å…·)

- **åŠŸèƒ½**ï¼šOpenAI Agent SDK å…§å»ºçš„ç¶²è·¯æœå°‹å·¥å…·
- **è·è²¬**ï¼š
  - æœå°‹ç¶²è·¯ä¸Šçš„å³æ™‚è³‡è¨Š
  - å–å¾—å¸‚å ´æ–°èžå’Œå…¬å¸è³‡è¨Š
  - æä¾›æœ€æ–°çš„è²¡ç¶“è³‡è¨Š
  - è£œå……éžçµæ§‹åŒ–å¸‚å ´æƒ…å ±
- **ç‹€æ…‹**ï¼šâœ… å…§å»ºå·¥å…· (ç›´æŽ¥ä½¿ç”¨)
- **ä½¿ç”¨æ–¹å¼**ï¼š

  ```python
  from agents import WebSearchTool

  # ç›´æŽ¥åŠ å…¥ Agent çš„å·¥å…·åˆ—è¡¨
  tools = [WebSearchTool()]
  ```

### å°ˆæ¥­åŠŸèƒ½ Agent (Agent-as-Tool)

åŸºæ–¼ casual-market-mcp æä¾›çš„è±å¯Œæ•¸æ“š,å°ˆæ¥­ Agent å¯ä»¥ç›´æŽ¥èª¿ç”¨æ‰€æœ‰å¸‚å ´æ•¸æ“šå·¥å…·é€²è¡Œæ·±åº¦åˆ†æž:

#### ðŸ¤– **é‡‘èžç ”ç©¶å“¡ Agent** (éœ€è¦å¯¦ä½œ)

- **Agent å°ˆæ¥­**ï¼šå°ˆç²¾è²¡å‹™åˆ†æžå’ŒæŠ•è³‡ç ”ç©¶
- **å¯ç”¨æ•¸æ“šå·¥å…·** (ä¾†è‡ª casual-market-mcp)ï¼š
  - å…¬å¸åŸºæœ¬é¢: `get_company_profile`, `get_company_balance_sheet`, `get_company_income_statement`
  - è²¡å‹™æŒ‡æ¨™: `get_stock_valuation_ratios`, `get_company_monthly_revenue`
  - è‚¡åˆ©æ”¿ç­–: `get_company_dividend`, `get_dividend_rights_schedule`
  - å¸‚å ´è³‡é‡‘: `get_foreign_investment_by_industry`, `get_top_foreign_holdings`
  
- **ä½œç‚ºå·¥å…·æä¾›çš„åˆ†æžåŠŸèƒ½**ï¼š
  - `analyze_company_fundamentals(symbol)`: ç¶œåˆåŸºæœ¬é¢åˆ†æž
    - è‡ªå‹•æ•´åˆè²¡å ±ã€ç‡Ÿæ”¶ã€ä¼°å€¼æ¯”çŽ‡
    - åˆ†æžè²¡å‹™å¥åº·åº¦å’Œæˆé•·æ€§
    - è©•ä¼°è‚¡åˆ©æ”¿ç­–ç©©å®šæ€§
  - `evaluate_investment_value(symbol)`: æŠ•è³‡åƒ¹å€¼è©•ä¼°
    - æœ¬ç›Šæ¯”ã€è‚¡åƒ¹æ·¨å€¼æ¯”åˆç†æ€§åˆ†æž
    - æ®–åˆ©çŽ‡å¸å¼•åŠ›è©•ä¼°
    - èˆ‡ç”¢æ¥­å¹³å‡æ¯”è¼ƒ
  - `assess_industry_position(symbol)`: ç”¢æ¥­åœ°ä½åˆ†æž
    - å¤–è³‡æŒè‚¡æ¯”ä¾‹åˆ†æž
    - ç”¢æ¥­å…§ç›¸å°è¡¨ç¾
    - å¸‚å ´è³‡é‡‘æµå‘è©•ä¼°

- **ç‹€æ…‹**ï¼šðŸ”¨ éœ€è¦å¯¦ä½œ(ä½†æ•¸æ“šå·¥å…·å·²å®Œå‚™)
- **Agent è¨­å®š**ï¼š

  ```python
  research_agent = Agent(
      name="é‡‘èžç ”ç©¶å“¡",
      model="gpt-4o",  # ä½¿ç”¨è¼ƒå¼·æ¨¡åž‹é€²è¡Œåˆ†æž
      instructions="""ä½ æ˜¯å°ˆæ¥­çš„é‡‘èžç ”ç©¶å“¡ï¼Œæ“…é•·å°ç£è‚¡å¸‚åŸºæœ¬é¢åˆ†æžã€‚
      
      ä½ å¯ä»¥ä½¿ç”¨ä»¥ä¸‹æ•¸æ“šå·¥å…·:
      - å…¬å¸è²¡å‹™å ±è¡¨(è³‡ç”¢è² å‚µè¡¨ã€æç›Šè¡¨)
      - æœˆç‡Ÿæ”¶æ•¸æ“šå’Œæˆé•·çŽ‡
      - ä¼°å€¼æŒ‡æ¨™(æœ¬ç›Šæ¯”ã€è‚¡åƒ¹æ·¨å€¼æ¯”ã€æ®–åˆ©çŽ‡)
      - å¤–è³‡æŒè‚¡å’Œå¸‚å ´è³‡é‡‘å‹•å‘
      - è‚¡åˆ©åˆ†é…æ­·å²
      
      è«‹åŸºæ–¼é€™äº›æ•¸æ“šæä¾›å®¢è§€ã€å°ˆæ¥­çš„æŠ•è³‡åˆ†æžã€‚""",
      tools=[
          # è‡ªå‹•é…ç½®æ‰€æœ‰ casual-market-mcp å·¥å…·
          *get_casual_market_tools()
      ]
  )
  ```

#### ðŸ¤– **æŠ€è¡“åˆ†æžå¸« Agent** (éœ€è¦å¯¦ä½œ)

- **Agent å°ˆæ¥­**ï¼šå°ˆç²¾æŠ€è¡“æŒ‡æ¨™å’Œåƒ¹é‡åˆ†æž
- **å¯ç”¨æ•¸æ“šå·¥å…·** (ä¾†è‡ª casual-market-mcp)ï¼š
  - åƒ¹æ ¼æ•¸æ“š: `get_taiwan_stock_price`, `get_stock_monthly_average`
  - äº¤æ˜“æ•¸æ“š: `get_stock_daily_trading`, `get_stock_monthly_trading`, `get_stock_yearly_trading`
  - å¸‚å ´å‹•å‘: `get_real_time_trading_stats`, `get_margin_trading_info`
  - æŒ‡æ•¸æ•¸æ“š: `get_market_index_info`, `get_market_historical_index`

- **ä½œç‚ºå·¥å…·æä¾›çš„åˆ†æžåŠŸèƒ½**ï¼š
  - `analyze_price_trend(symbol, timeframe)`: åƒ¹æ ¼è¶¨å‹¢åˆ†æž
    - åŸºæ–¼æ—¥/æœˆ/å¹´äº¤æ˜“æ•¸æ“š
    - è¨ˆç®—ç§»å‹•å¹³å‡ç·š
    - è­˜åˆ¥è¶¨å‹¢æ–¹å‘å’Œå¼·åº¦
  - `analyze_volume_pattern(symbol)`: æˆäº¤é‡åž‹æ…‹åˆ†æž
    - æˆäº¤é‡èˆ‡åƒ¹æ ¼é—œä¿‚
    - ç•°å¸¸æ”¾é‡æª¢æ¸¬
    - æ›æ‰‹çŽ‡åˆ†æž
  - `assess_market_sentiment(symbol)`: å¸‚å ´æƒ…ç·’è©•ä¼°
    - èžè³‡èžåˆ¸è®ŠåŒ–
    - å¤–è³‡è²·è³£è¶…
    - å¸‚å ´æ•´é«”æ°›åœ

- **ç‹€æ…‹**ï¼šðŸ”¨ éœ€è¦å¯¦ä½œ(ä½†æ•¸æ“šå·¥å…·å·²å®Œå‚™)

#### ðŸ¤– **é¢¨éšªè©•ä¼°å¸« Agent** (éœ€è¦å¯¦ä½œ)

- **Agent å°ˆæ¥­**ï¼šå°ˆç²¾æŠ•è³‡çµ„åˆé¢¨éšªç®¡ç†
- **å¯ç”¨æ•¸æ“šå·¥å…·** (ä¾†è‡ª casual-market-mcp)ï¼š
  - ä¼°å€¼é¢¨éšª: `get_stock_valuation_ratios`
  - å¸‚å ´é¢¨éšª: `get_market_index_info`, `get_real_time_trading_stats`
  - ç”¢æ¥­é¢¨éšª: `get_foreign_investment_by_industry`
  - æµå‹•æ€§é¢¨éšª: `get_stock_daily_trading`, `get_margin_trading_info`

- **ä½œç‚ºå·¥å…·æä¾›çš„åŠŸèƒ½**ï¼š
  - `calculate_portfolio_risk(agent_id, holdings)`: æŠ•è³‡çµ„åˆé¢¨éšªè¨ˆç®—
    - é›†ä¸­åº¦é¢¨éšªè©•ä¼°
    - ç”¢æ¥­é…ç½®åˆ†æž
    - å€‹è‚¡é¢¨éšªè©•ç´š
  - `assess_position_sizing(symbol, portfolio_value, risk_tolerance)`: éƒ¨ä½æŽ§åˆ¶å»ºè­°
    - åŸºæ–¼æ³¢å‹•åº¦çš„éƒ¨ä½å»ºè­°
    - æµå‹•æ€§è€ƒé‡
    - é¢¨éšªæ‰¿å—åº¦åŒ¹é…
  - `evaluate_market_risk()`: å¸‚å ´ç³»çµ±æ€§é¢¨éšªè©•ä¼°
    - å¤§ç›¤è¶¨å‹¢åˆ†æž
    - èžè³‡èžåˆ¸æ¯”ä¾‹è­¦ç¤º
    - å¤–è³‡å‹•å‘è©•ä¼°

- **ç‹€æ…‹**ï¼šðŸ”¨ éœ€è¦å¯¦ä½œ(ä½†æ•¸æ“šå·¥å…·å·²å®Œå‚™)

### é©—è­‰èˆ‡ç®¡ç†å·¥å…· (Validation Tools)

**æ³¨æ„**: ç”±æ–¼ casual-market-mcp çš„ `buy_taiwan_stock` å’Œ `sell_taiwan_stock` å·²å…§å»ºæ¨¡æ“¬äº¤æ˜“æ©Ÿåˆ¶,éƒ¨åˆ†é©—è­‰å¯ä»¥æ•´åˆåˆ°äº¤æ˜“æµç¨‹ä¸­ã€‚

#### ðŸ”§ **TimeValidatorTool** (ç°¡åŒ–å¯¦ä½œ)

- **åŠŸèƒ½**ï¼šé©—è­‰å°ç£è‚¡å¸‚äº¤æ˜“æ™‚é–“
- **è·è²¬**ï¼š
  - `is_trading_hours()`: æª¢æŸ¥ç•¶å‰æ˜¯å¦ç‚ºäº¤æ˜“æ™‚é–“
  - `get_next_trading_session()`: å–å¾—ä¸‹æ¬¡äº¤æ˜“æ™‚é–“
- **å¯¦ä½œå»ºè­°**: å¯æ•´åˆåˆ° Agent çš„æ±ºç­–é‚è¼¯ä¸­,åœ¨éžäº¤æ˜“æ™‚é–“è‡ªå‹•æš«åœäº¤æ˜“
- **ç‹€æ…‹**ï¼šðŸ”¨ éœ€è¦ç°¡åŒ–å¯¦ä½œ

#### ðŸ”§ **PortfolioManagerTool** (éœ€è¦å¯¦ä½œ)

- **åŠŸèƒ½**ï¼šæŠ•è³‡çµ„åˆç®¡ç†èˆ‡è¿½è¹¤
- **è·è²¬**ï¼š
  - `get_portfolio(agent_id)`: å–å¾— Agent ç•¶å‰æŒè‚¡
  - `calculate_portfolio_value(agent_id)`: è¨ˆç®—æŠ•è³‡çµ„åˆç¸½å€¼
  - `check_buying_power(agent_id, amount)`: æª¢æŸ¥å¯ç”¨è³‡é‡‘
  - `update_holdings(agent_id, symbol, quantity, action)`: æ›´æ–°æŒè‚¡è¨˜éŒ„
- **æ•¸æ“šä¾†æº**: æ•´åˆ casual-market-mcp çš„åƒ¹æ ¼æ•¸æ“šèˆ‡æœ¬åœ°æŒè‚¡è¨˜éŒ„
- **ç‹€æ…‹**ï¼šðŸ”¨ éœ€è¦å¯¦ä½œ

### Agent-to-Tool å¯¦ä½œç¯„ä¾‹ (åŸºæ–¼å®˜æ–¹æ–‡æª”å’Œ casual-market-mcp)

**åƒè€ƒå®˜æ–¹æ–‡æª”**: [OpenAI Agents Python - MCP Integration](https://github.com/openai/openai-agents-python/blob/main/docs/mcp.md)

```python
from agents import Agent, Runner, function_tool, WebSearchTool
from agents.mcp import MCPServerStdio
import asyncio

# 1. è¨­ç½® casual-market-mcp ä¼ºæœå™¨ (ä½¿ç”¨å®˜æ–¹ MCPServerStdio)
async def create_casual_market_server():
    """å‰µå»º casual-market-mcp ä¼ºæœå™¨å¯¦ä¾‹
    
    æ ¹æ“šå®˜æ–¹æ–‡æª”,ä½¿ç”¨ MCPServerStdio ä¾†é€£æŽ¥æœ¬åœ° MCP ä¼ºæœå™¨
    åƒè€ƒ: https://github.com/openai/openai-agents-python/blob/main/docs/mcp.md
    """
    server = MCPServerStdio(
        name="Casual Market MCP Server",
        params={
            "command": "uvx",
            "args": [
                "--from", 
                "/path/to/CasualMarket",  # æ›¿æ›ç‚ºå¯¦éš›è·¯å¾‘
                "casual-market-mcp"
            ],
        },
        # å¯é¸: å•Ÿç”¨å·¥å…·åˆ—è¡¨å¿«å–ä»¥æå‡æ€§èƒ½
        cache_tools_list=True,
    )
    return server

# 2. å‰µå»ºå°ˆæ¥­åŠŸèƒ½ Agent (ç›´æŽ¥ä½¿ç”¨ mcp_servers åƒæ•¸)
async def main():
    """ä¸»è¦åŸ·è¡Œå‡½æ•¸ - å±•ç¤ºæ­£ç¢ºçš„ MCP æ•´åˆæ–¹å¼"""
    
    # å‰µå»º casual-market-mcp ä¼ºæœå™¨å¯¦ä¾‹
    casual_market_server = await create_casual_market_server()
    
    async with casual_market_server:  # ä½¿ç”¨ async context manager
        
        # 3. å‰µå»ºå°ˆæ¥­ Agent (ç›´æŽ¥å°‡ MCP server åŠ å…¥ mcp_servers åƒæ•¸)
        research_agent = Agent(
            name="é‡‘èžç ”ç©¶å“¡",
            model="gpt-4o",
            instructions="""ä½ æ˜¯å°ˆæ¥­çš„é‡‘èžç ”ç©¶å“¡ï¼Œå…·å‚™æ·±åŽšçš„è²¡å‹™åˆ†æžèƒ½åŠ›ã€‚
            
            casual-market-mcp ä¼ºæœå™¨æä¾›ä»¥ä¸‹ 21 å€‹å·¥å…·ä¾›ä½ ä½¿ç”¨:
            
            ã€å…¬å¸åŸºæœ¬é¢åˆ†æžã€‘
            - get_company_profile: å…¬å¸åŸºæœ¬è³‡æ–™
            - get_company_balance_sheet: è³‡ç”¢è² å‚µè¡¨(è‡ªå‹•åµæ¸¬ç”¢æ¥­åˆ¥)
            - get_company_income_statement: ç¶œåˆæç›Šè¡¨(è‡ªå‹•åµæ¸¬ç”¢æ¥­åˆ¥)
            - get_company_monthly_revenue: æœˆç‡Ÿæ”¶è³‡è¨Š
            - get_company_dividend: è‚¡åˆ©åˆ†é…è³‡è¨Š
            
            ã€ä¼°å€¼èˆ‡å¸‚å ´åˆ†æžã€‘
            - get_stock_valuation_ratios: æœ¬ç›Šæ¯”ã€è‚¡åƒ¹æ·¨å€¼æ¯”ã€æ®–åˆ©çŽ‡
            - get_foreign_investment_by_industry: å¤–è³‡æŒè‚¡ç”¢æ¥­åˆ†æž
            - get_top_foreign_holdings: å¤–è³‡æŒè‚¡å‰20å
            
            ã€å¸‚å ´è³‡é‡‘å‹•å‘ã€‘
            - get_margin_trading_info: èžè³‡èžåˆ¸è³‡è¨Š
            - get_real_time_trading_stats: å³æ™‚äº¤æ˜“çµ±è¨ˆ
            
            è«‹ç›´æŽ¥èª¿ç”¨é€™äº›å·¥å…·é€²è¡Œåˆ†æž,æä¾›å®¢è§€ã€å°ˆæ¥­çš„æŠ•è³‡åˆ†æžå ±å‘Šã€‚""",
            mcp_servers=[casual_market_server],  # ðŸ”‘ é—œéµ: å°‡ MCP server åŠ å…¥é€™è£¡
        )
        
        technical_agent = Agent(
            name="æŠ€è¡“åˆ†æžå¸«",
            model="gpt-4o",
            instructions="""ä½ æ˜¯å°ˆæ¥­çš„æŠ€è¡“åˆ†æžå¸«ï¼Œå°ˆç²¾æ–¼è‚¡ç¥¨æŠ€è¡“é¢å’Œåƒ¹é‡åˆ†æžã€‚
            
            casual-market-mcp ä¼ºæœå™¨æä¾›ä»¥ä¸‹å·¥å…·:
            
            ã€åƒ¹æ ¼æ•¸æ“šã€‘
            - get_taiwan_stock_price: å³æ™‚è‚¡åƒ¹
            - get_stock_monthly_average: æœˆå¹³å‡åƒ¹æ ¼
            
            ã€äº¤æ˜“æ•¸æ“šã€‘
            - get_stock_daily_trading: æ—¥äº¤æ˜“è³‡è¨Š(æˆäº¤é‡ã€é‡‘é¡)
            - get_stock_monthly_trading: æœˆäº¤æ˜“è³‡è¨Š
            - get_stock_yearly_trading: å¹´äº¤æ˜“è³‡è¨Š
            
            ã€å¸‚å ´å‹•å‘ã€‘
            - get_real_time_trading_stats: å³æ™‚äº¤æ˜“çµ±è¨ˆ
            - get_margin_trading_info: èžè³‡èžåˆ¸è®ŠåŒ–
            - get_market_index_info: å¤§ç›¤æŒ‡æ•¸èµ°å‹¢
            - get_market_historical_index: æ­·å²æŒ‡æ•¸è³‡æ–™
            
            è«‹ç›´æŽ¥èª¿ç”¨é€™äº›å·¥å…·é€²è¡ŒæŠ€è¡“é¢åˆ†æžã€‚""",
            mcp_servers=[casual_market_server],
        )
        
        risk_agent = Agent(
            name="é¢¨éšªè©•ä¼°å¸«",
            model="gpt-4o",
            instructions="""ä½ æ˜¯å°ˆæ¥­çš„æŠ•è³‡é¢¨éšªè©•ä¼°å¸«ï¼Œå°ˆç²¾æ–¼æŠ•è³‡çµ„åˆé¢¨éšªç®¡ç†ã€‚
            
            casual-market-mcp ä¼ºæœå™¨æä¾›ä»¥ä¸‹å·¥å…·é€²è¡Œé¢¨éšªè©•ä¼°:
            
            ã€ä¼°å€¼é¢¨éšªã€‘
            - get_stock_valuation_ratios: è©•ä¼°å€‹è‚¡ä¼°å€¼æ˜¯å¦éŽé«˜
            
            ã€å¸‚å ´é¢¨éšªã€‘
            - get_market_index_info: å¤§ç›¤ç³»çµ±æ€§é¢¨éšª
            - get_real_time_trading_stats: å¸‚å ´æµå‹•æ€§ç‹€æ³
            
            ã€ç”¢æ¥­é¢¨éšªã€‘
            - get_foreign_investment_by_industry: å¤–è³‡å°ç”¢æ¥­çš„æ…‹åº¦
            - get_margin_trading_info: å¸‚å ´æŠ•æ©Ÿæ°›åœ
            
            ã€æµå‹•æ€§é¢¨éšªã€‘
            - get_stock_daily_trading: å€‹è‚¡æµå‹•æ€§è©•ä¼°
            
            è«‹ç›´æŽ¥èª¿ç”¨é€™äº›å·¥å…·æä¾›å…¨é¢çš„é¢¨éšªè©•ä¼°å’Œéƒ¨ä½æŽ§åˆ¶å»ºè­°ã€‚""",
            mcp_servers=[casual_market_server],
        )
        
        # 4. æŠ•è³‡çµ„åˆç®¡ç†å·¥å…· (æœ¬åœ°å¯¦ä½œ,ä½¿ç”¨ MCP ç²å–å³æ™‚åƒ¹æ ¼)
        @function_tool
        async def get_agent_portfolio(agent_id: str) -> dict:
            """å–å¾— Agent æŠ•è³‡çµ„åˆ
            
            æ³¨æ„: æ­¤å‡½æ•¸å¾žæœ¬åœ°è³‡æ–™åº«è®€å–æŒè‚¡è¨˜éŒ„,
            ç„¶å¾Œä½¿ç”¨ casual-market-mcp æ›´æ–°å³æ™‚åƒ¹æ ¼
            """
            # å¾žè³‡æ–™åº«è®€å–æŒè‚¡è¨˜éŒ„ (éœ€å¯¦ä½œ)
            holdings = await db.get_holdings(agent_id)  # å‡è¨­çš„è³‡æ–™åº«èª¿ç”¨
            
            # casual-market-mcp çš„å·¥å…·æœƒè‡ªå‹•å¯ç”¨,å› ç‚º server åœ¨ context ä¸­
            # Agent å¯ä»¥ç›´æŽ¥èª¿ç”¨ get_taiwan_stock_price ä¾†æ›´æ–°åƒ¹æ ¼
            
            return {
                "agent_id": agent_id,
                "holdings": holdings,
                "cash": await db.get_cash_balance(agent_id),
            }
        
        @function_tool
        async def execute_trade(agent_id: str, symbol: str, action: str, quantity: int) -> dict:
            """åŸ·è¡Œäº¤æ˜“(æ•´åˆé©—è­‰)
            
            æ³¨æ„: casual-market-mcp å·²æä¾› buy_taiwan_stock å’Œ sell_taiwan_stock
            æ­¤å‡½æ•¸ä¸»è¦è² è²¬é©—è­‰å’Œæœ¬åœ°è¨˜éŒ„æ›´æ–°
            """
            import datetime
            import pytz
            
            # 1. äº¤æ˜“æ™‚é–“é©—è­‰
            taiwan_tz = pytz.timezone('Asia/Taipei')
            now = datetime.datetime.now(taiwan_tz)
            if now.weekday() >= 5 or not (9 <= now.hour < 14):
                return {"success": False, "message": "éžäº¤æ˜“æ™‚é–“"}
            
            # 2. è³‡é‡‘é©—è­‰ (éœ€å¯¦ä½œ)
            portfolio = await get_agent_portfolio(agent_id)
            if action == "buy":
                # æª¢æŸ¥è³‡é‡‘æ˜¯å¦å……è¶³ (å‡è¨­ 0.2% æ‰‹çºŒè²»)
                # å¯¦éš›åƒ¹æ ¼æœƒç”± casual-market-mcp çš„ buy_taiwan_stock è™•ç†
                pass
            
            # 3. èª¿ç”¨ casual-market-mcp åŸ·è¡Œäº¤æ˜“
            # Agent æœƒç›´æŽ¥èª¿ç”¨ buy_taiwan_stock æˆ– sell_taiwan_stock
            
            # 4. æ›´æ–°æœ¬åœ°æŒè‚¡è¨˜éŒ„ (éœ€å¯¦ä½œ)
            await db.update_holdings(agent_id, symbol, quantity, action)
            
            return {
                "success": True,
                "message": f"å·²{action} {symbol} {quantity} è‚¡"
            }

        # 5. å‰µå»ºäº¤æ˜“ Agent (æ•´åˆæ‰€æœ‰çµ„ä»¶)
        trading_agent = Agent(
            name="ç©©å¥æŠ•è³‡è€…",
            model="gpt-4o-mini",
            instructions="""ä½ æ˜¯ç©©å¥åž‹æŠ•è³‡è€…,æŠ•è³‡ç›®æ¨™æ˜¯é•·æœŸç©©å®šå¢žå€¼ã€‚
            
            æŠ•è³‡åŽŸå‰‡:
            - å„ªå…ˆè€ƒæ…®å¤§åž‹ç¸¾å„ªè‚¡å’Œé‡‘èžè‚¡
            - æ³¨é‡å…¬å¸è²¡å‹™ç©©å¥æ€§å’Œè‚¡æ¯é…ç™¼ç´€éŒ„
            - é¿å…é«˜æ³¢å‹•æ€§å’ŒæŠ•æ©Ÿæ€§è‚¡ç¥¨
            - åˆ†æ•£æŠ•è³‡é™ä½Žé¢¨éšª
            
            æ±ºç­–æµç¨‹:
            1. è«®è©¢é‡‘èžç ”ç©¶å“¡é€²è¡ŒåŸºæœ¬é¢åˆ†æž
            2. è«®è©¢æŠ€è¡“åˆ†æžå¸«è©•ä¼°è²·è³£æ™‚æ©Ÿ
            3. è«®è©¢é¢¨éšªè©•ä¼°å¸«ç¢ºèªé¢¨éšªå¯æŽ§
            4. åŸºæ–¼ä¸‰æ–¹æ„è¦‹åšå‡ºæœ€çµ‚æ±ºç­–
            
            ä½ çš„æŠ•è³‡çµ„åˆç›®æ¨™æ˜¯ç©©å®šæˆé•·,ä¿è­·è³‡æœ¬ç‚ºå„ªå…ˆè€ƒé‡ã€‚""",
            tools=[
                # æŠ•è³‡çµ„åˆç®¡ç†å·¥å…·
                get_agent_portfolio,
                execute_trade,
                
                # ç¶²è·¯æœå°‹å·¥å…·(å…§å»º)
                WebSearchTool(),
                
                # å°ˆæ¥­ Agent ä½œç‚ºé¡§å•å·¥å…·
                research_agent.as_tool(
                    tool_name="consult_financial_analyst",
                    tool_description="""è«®è©¢é‡‘èžç ”ç©¶å“¡é€²è¡Œæ·±åº¦åŸºæœ¬é¢åˆ†æžã€‚
                    
                    ç ”ç©¶å“¡å¯ç›´æŽ¥ä½¿ç”¨ casual-market-mcp çš„å®Œæ•´å·¥å…·é›†:
                - å…¬å¸è²¡å ±(è³‡ç”¢è² å‚µè¡¨ã€æç›Šè¡¨)
                - æœˆç‡Ÿæ”¶æ•¸æ“šèˆ‡æˆé•·çŽ‡
                - ä¼°å€¼æŒ‡æ¨™(P/E, P/B, æ®–åˆ©çŽ‡)
                - å¤–è³‡æŒè‚¡èˆ‡å¸‚å ´è³‡é‡‘å‹•å‘
                - è‚¡åˆ©åˆ†é…æ­·å²
                
                é©ç”¨æƒ…å¢ƒ: è©•ä¼°å€‹è‚¡æŠ•è³‡åƒ¹å€¼ã€åˆ†æžè²¡å‹™å¥åº·åº¦ã€ç”¢æ¥­åœ°ä½åˆ†æž"""
            ),
            technical_agent.as_tool(
                tool_name="consult_technical_analyst",
                tool_description="""è«®è©¢æŠ€è¡“åˆ†æžå¸«é€²è¡Œåƒ¹é‡åˆ†æžã€‚
                
                åˆ†æžå¸«å¯ä½¿ç”¨å®Œæ•´çš„äº¤æ˜“æ•¸æ“šå·¥å…·:
                - æ—¥/æœˆ/å¹´äº¤æ˜“æ•¸æ“š
                - æˆäº¤é‡èˆ‡æ›æ‰‹çŽ‡åˆ†æž
                - èžè³‡èžåˆ¸è®ŠåŒ–
                    - å…¬å¸è²¡å ±ã€ç‡Ÿæ”¶ã€ä¼°å€¼ã€è‚¡åˆ©ã€å¤–è³‡æŒè‚¡ç­‰
                    
                    é©ç”¨æƒ…å¢ƒ: è©•ä¼°å€‹è‚¡æŠ•è³‡åƒ¹å€¼ã€åˆ†æžè²¡å‹™å¥åº·åº¦ã€ç”¢æ¥­åœ°ä½åˆ†æž"""
                ),
                technical_agent.as_tool(
                    tool_name="consult_technical_analyst",
                    tool_description="""è«®è©¢æŠ€è¡“åˆ†æžå¸«é€²è¡Œåƒ¹é‡åˆ†æžã€‚
                    
                    åˆ†æžå¸«å¯ç›´æŽ¥ä½¿ç”¨ casual-market-mcp çš„äº¤æ˜“æ•¸æ“š:
                    - æ—¥/æœˆ/å¹´äº¤æ˜“æ•¸æ“š
                    - æˆäº¤é‡èˆ‡æ›æ‰‹çŽ‡åˆ†æž
                    - èžè³‡èžåˆ¸è®ŠåŒ–
                    - å¤§ç›¤æŒ‡æ•¸èµ°å‹¢
                    - å³æ™‚äº¤æ˜“çµ±è¨ˆ
                    
                    é©ç”¨æƒ…å¢ƒ: åˆ¤æ–·è²·è³£æ™‚æ©Ÿã€è©•ä¼°å¸‚å ´æƒ…ç·’ã€åˆ†æžè¶¨å‹¢å¼·åº¦"""
                ),
                risk_agent.as_tool(
                    tool_name="consult_risk_manager",
                    tool_description="""è«®è©¢é¢¨éšªè©•ä¼°å¸«é€²è¡Œé¢¨éšªç®¡ç†ã€‚
                    
                    è©•ä¼°å¸«å¯ç›´æŽ¥ä½¿ç”¨ casual-market-mcp çš„å¸‚å ´æ•¸æ“š:
                    - æŠ•è³‡çµ„åˆé›†ä¸­åº¦é¢¨éšª
                    - å€‹è‚¡ä¼°å€¼é¢¨éšª(P/E, P/B æ˜¯å¦éŽé«˜)
                    - å¸‚å ´ç³»çµ±æ€§é¢¨éšª(å¤§ç›¤èµ°å‹¢)
                    - ç”¢æ¥­é¢¨éšª(å¤–è³‡æ…‹åº¦ã€èžè³‡èžåˆ¸)
                    - æµå‹•æ€§é¢¨éšª(æˆäº¤é‡åˆ†æž)
                    
                    é©ç”¨æƒ…å¢ƒ: éƒ¨ä½å¤§å°æ±ºç­–ã€é¢¨éšªæŽ§åˆ¶ã€åˆ†æ•£æŠ•è³‡å»ºè­°"""
                ),
            ],
            # ðŸ”‘ é—œéµ: ä¹Ÿå¯ä»¥å°‡ casual-market-mcp ç›´æŽ¥åŠ å…¥äº¤æ˜“ Agent
            # é€™æ¨£äº¤æ˜“ Agent å¯ä»¥ç›´æŽ¥èª¿ç”¨ buy_taiwan_stock ç­‰å·¥å…·
            mcp_servers=[casual_market_server],
        )
        
        # 6. åŸ·è¡ŒæŠ•è³‡æ±ºç­–
        result = await Runner.run(
            trading_agent,
            "è«‹åˆ†æžå°ç©é›»(2330)æ˜¯å¦é©åˆè²·å…¥,æˆ‘çš„æŠ•è³‡çµ„åˆç›®å‰æœ‰100è¬ç¾é‡‘"
        )
        
        print(result.final_output)
        
        # ðŸŽ¯ åŸ·è¡Œæµç¨‹èªªæ˜Ž:
        # 1. äº¤æ˜“ Agent æ”¶åˆ°å•é¡Œ
        # 2. èª¿ç”¨ consult_financial_analyst (é‡‘èžç ”ç©¶å“¡ Agent)
        #    â†’ ç ”ç©¶å“¡ Agent ä½¿ç”¨ casual-market-mcp çš„å·¥å…·:
        #      - get_company_profile(2330)
        #      - get_company_balance_sheet(2330)
        #      - get_stock_valuation_ratios(2330)
        #      - get_company_monthly_revenue(2330)
        #    â†’ è¿”å›žåŸºæœ¬é¢åˆ†æžå ±å‘Š
        # 3. èª¿ç”¨ consult_technical_analyst (æŠ€è¡“åˆ†æžå¸« Agent)
        #    â†’ åˆ†æžå¸« Agent ä½¿ç”¨ casual-market-mcp çš„å·¥å…·:
        #      - get_taiwan_stock_price(2330)
        #      - get_stock_daily_trading(2330)
        #      - get_margin_trading_info()
        #    â†’ è¿”å›žæŠ€è¡“é¢åˆ†æžå ±å‘Š
        # 4. èª¿ç”¨ consult_risk_manager (é¢¨éšªè©•ä¼°å¸« Agent)
        #    â†’ è©•ä¼°å¸« Agent ä½¿ç”¨ casual-market-mcp çš„å·¥å…·:
        #      - get_stock_valuation_ratios(2330)
        #      - get_market_index_info()
        #    â†’ è¿”å›žé¢¨éšªè©•ä¼°å ±å‘Š
        # 5. èª¿ç”¨ get_agent_portfolio(agent_id) æª¢æŸ¥è³‡é‡‘ç‹€æ³
        # 6. äº¤æ˜“ Agent ç¶œåˆæ‰€æœ‰è³‡è¨Š,åŸºæ–¼ç­–ç•¥ prompt åšå‡ºæ±ºç­–
        # 7. å¦‚æ±ºå®šè²·å…¥:
        #    â†’ ç›´æŽ¥èª¿ç”¨ casual-market-mcp çš„ buy_taiwan_stock(2330, 1000)
        #    â†’ æˆ–èª¿ç”¨è‡ªè¨‚çš„ execute_trade(...) é€²è¡Œé¡å¤–é©—è­‰

# é‹è¡Œç¯„ä¾‹
if __name__ == "__main__":
    asyncio.run(main())
```

### æž¶æ§‹å„ªå‹¢ (åŸºæ–¼ casual-market-mcp å®Œæ•´åŠŸèƒ½)

1. **æ•¸æ“šå®Œæ•´æ€§**ï¼šcasual-market-mcp æä¾› 21 å€‹å°ˆæ¥­å·¥å…·,æ¶µè“‹å³æ™‚åƒ¹æ ¼ã€è²¡å ±ã€ç‡Ÿæ”¶ã€ä¼°å€¼ã€å¸‚å ´è³‡é‡‘ç­‰å…¨æ–¹ä½æ•¸æ“š
2. **å°ˆæ¥­åˆ†å·¥**ï¼š
   - äº¤æ˜“ Agent: ç­–ç•¥åŸ·è¡Œå’Œæœ€çµ‚æ±ºç­–
   - é‡‘èžç ”ç©¶å“¡: æ·±åº¦åŸºæœ¬é¢åˆ†æž(ç›´æŽ¥ä½¿ç”¨ casual-market-mcp è²¡å‹™æ•¸æ“š)
   - æŠ€è¡“åˆ†æžå¸«: åƒ¹é‡åˆ†æž(ç›´æŽ¥ä½¿ç”¨ casual-market-mcp äº¤æ˜“æ•¸æ“š)
   - é¢¨éšªè©•ä¼°å¸«: é¢¨éšªç®¡ç†(æ•´åˆå¤šç¶­åº¦å¸‚å ´æ•¸æ“š)
3. **æ¨¡çµ„åŒ–è¨­è¨ˆ**ï¼šå°ˆæ¥­ Agent å¯ç¨ç«‹æ¸¬è©¦å’Œå„ªåŒ–
4. **æˆæœ¬å„ªåŒ–**ï¼š
   - äº¤æ˜“ Agent ä½¿ç”¨ GPT-4o-mini(é »ç¹èª¿ç”¨)
   - å°ˆæ¥­ Agent ä½¿ç”¨ GPT-4o(æ·±åº¦åˆ†æž,èª¿ç”¨è¼ƒå°‘)
5. **å¯æ“´å±•æ€§**ï¼šè¼•é¬†æ·»åŠ æ–°å°ˆæ¥­ Agent(å¦‚ç¸½é«”ç¶“æ¿Ÿåˆ†æžå¸«)
6. **æ•¸æ“šå³æ™‚æ€§**ï¼šæ‰€æœ‰æ•¸æ“šä¾†è‡ª casual-market-mcp å³æ™‚æŸ¥è©¢,ç„¡éœ€æœ¬åœ°å¿«å–

### 2. å³æ™‚äº¤æ˜“ç›£æŽ§ç³»çµ±

#### 2.1 å¯¦æ™‚æ•¸æ“šæµ

- **WebSocket äº‹ä»¶é¡žåž‹**
  - `agent_status_update`: ä»£ç†äººç‹€æ…‹è®ŠåŒ–
  - `trade_executed`: äº¤æ˜“åŸ·è¡Œé€šçŸ¥
  - `portfolio_update`: æŠ•è³‡çµ„åˆæ›´æ–°
  - `research_activity`: ç ”ç©¶æ´»å‹•è¨˜éŒ„
  - `strategy_change`: ç­–ç•¥èª¿æ•´é€šçŸ¥
  - `investment_rationale`: æŠ•è³‡æ±ºç­–åŽŸå› è¨˜éŒ„
  - `fund_verification`: è³‡é‡‘é©—è­‰çµæžœ
  - `trading_hours_check`: äº¤æ˜“æ™‚é–“é©—è­‰çµæžœ

#### 2.2 äº¤æ˜“åŸ·è¡Œè¿½è¹¤èˆ‡é©—è­‰

- **äº¤æ˜“å‰é©—è­‰**
  - äº¤æ˜“æ™‚é–“æª¢æŸ¥ï¼šé€±ä¸€è‡³é€±äº” 09:00-13:30ï¼ˆå°ç£æ™‚é–“ï¼‰
  - è³‡é‡‘å……è¶³æ€§é©—è­‰ï¼šç¢ºèªè²·å…¥å‰ç¾é‡‘é¤˜é¡è¶³å¤ 
  - æŠ•è³‡ç­–ç•¥ç¬¦åˆæ€§æª¢æŸ¥ï¼šå–®ä¸€æŒè‚¡æ¯”ä¾‹é™åˆ¶
  - é¢¨éšªè©•ä¼°ï¼šæŠ•è³‡çµ„åˆé¢¨éšªåˆ†æž

- **è²·å…¥/è³£å‡ºæ“ä½œ**
  - å³æ™‚åƒ¹æ ¼ç²å–ï¼ˆå°ç£è­‰äº¤æ‰€ï¼‰
  - æ‰‹çºŒè²»è¨ˆç®— (0.2% spread)
  - äº¤æ˜“ç¢ºèªèˆ‡è¨˜éŒ„
  - æŠ•è³‡åŽŸå› æŒä¹…åŒ–è¨˜éŒ„
  - å‰ç«¯å‹•ç•«åé¥‹

#### 2.3 æŠ•è³‡æ±ºç­–è¿½è¹¤

- **æ±ºç­–è¨˜éŒ„ç³»çµ±**
  - æ¯ç­†äº¤æ˜“è¨˜éŒ„æŠ•è³‡åŽŸå› 
  - AI ä»£ç†äººæ±ºç­–éŽç¨‹è¨˜éŒ„
  - ç­–ç•¥èª¿æ•´æ­·å²è¿½è¹¤
  - å¸‚å ´åˆ†æžçµæžœä¿å­˜
  - å·¥å…·ä½¿ç”¨è¨˜éŒ„ï¼ˆWebSearchã€é‡‘èžç ”ç©¶å“¡ Agent ç­‰ï¼‰

### 3. è¦–è¦ºåŒ–å„€è¡¨æ¿

#### 3.1 ä¸»å„€è¡¨æ¿

- **ä»£ç†äººå¡ç‰‡**
  - ç¸½è³‡ç”¢ã€æç›Šã€ç¾é‡‘é¤˜é¡
  - å³æ™‚è³‡ç”¢åƒ¹å€¼æ›²ç·šåœ–
  - æŒè‚¡åˆ†å¸ƒé¡¯ç¤º
  - ç‹€æ…‹æŒ‡ç¤ºç‡ˆï¼ˆé‹è¡Œ/åœæ­¢/ç ”ç©¶ä¸­ï¼‰

#### 3.2 è©³ç´°æ¨¡æ…‹è¦–çª—

- **è³‡ç”¢è®ŠåŒ–åœ–è¡¨**
  - Chart.js å¯¦ç¾
  - æ”¯æ´ç¸®æ”¾å’Œæ™‚é–“ç¯„åœé¸æ“‡
  - å¤šæ¢ä»¶ç¯©é¸

- **æŒè‚¡è©³æƒ…**
  - è‚¡ç¥¨ä»£ç¢¼ã€åç¨±ã€æŒæœ‰æ•¸é‡
  - å¹³å‡æˆæœ¬ã€ç•¶å‰åƒ¹æ ¼
  - æç›Šè¨ˆç®—

- **äº¤æ˜“æ­·å²**
  - æ™‚é–“åºåˆ—é¡¯ç¤º
  - è²·å…¥/è³£å‡ºæ¨™è¨˜
  - äº¤æ˜“åŽŸå› è¨˜éŒ„

### 4. å°ç£è‚¡å¸‚æ•´åˆ

#### 4.1 æ”¯æ´è‚¡ç¥¨ç¯„åœ

- **ä¸Šå¸‚è‚¡ç¥¨**: 4ä½æ•¸ä»£ç¢¼ (å¦‚: 2330, 2317)
- **ETF**: 4-6ä½æ•¸ + å­—æ¯ (å¦‚: 0050, 00646)
- **ç†±é–€æ¨™çš„**: å°ç©é›»ã€é´»æµ·ã€è¯ç™¼ç§‘ç­‰

#### 4.2 å¸‚å ´è³‡æ–™

- **å³æ™‚åƒ¹æ ¼**: é€éŽ MCP æœå‹™å–å¾—
- **å…¬å¸è³‡è¨Š**: åç¨±ã€ç”¢æ¥­åˆ†é¡ž
- **äº¤æ˜“æ™‚é–“**: å°ç£è­‰äº¤æ‰€ç‡Ÿæ¥­æ™‚é–“

---

## ðŸ—ï¸ æŠ€è¡“æž¶æ§‹è¦æ ¼

### 1. ç³»çµ±æž¶æ§‹åœ–

```text
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                   å‰ç«¯å±¤ (Frontend)                       â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ Vanilla JS  â”‚ â”‚ Chart.js    â”‚ â”‚ WebSocket Client    â”‚  â”‚
â”‚  â”‚ å„€è¡¨æ¿+è¨­å®š  â”‚ â”‚ åœ–è¡¨è¦–è¦ºåŒ–   â”‚ â”‚ å³æ™‚é€šä¿¡            â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚ HTTP/WS
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                  Web æœå‹™å±¤ (Backend)                     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  FastAPI    â”‚ â”‚ WebSocket   â”‚ â”‚ éœæ…‹æª”æ¡ˆæœå‹™         â”‚  â”‚
â”‚  â”‚  REST API   â”‚ â”‚ å³æ™‚æŽ¨é€    â”‚ â”‚ Static Files        â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚ å…§éƒ¨èª¿ç”¨
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              AI ä»£ç†äººå±¤ (Agent Layer)                     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ OpenAI      â”‚ â”‚ SQLite      â”‚ â”‚ Tool Manager        â”‚  â”‚
â”‚  â”‚ Agent SDK   â”‚ â”‚ Session     â”‚ â”‚ å·¥å…·é…ç½®ç®¡ç†         â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ Trading     â”‚ â”‚ Research    â”‚ â”‚ Risk Management     â”‚  â”‚
â”‚  â”‚ Agents      â”‚ â”‚ Agent       â”‚ â”‚ é¢¨éšªæŽ§åˆ¶            â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚ å·¥å…·èª¿ç”¨
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                  å·¥å…·å±¤ (Tools Layer)                     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ Market MCP  â”‚ â”‚ WebSearch   â”‚ â”‚ Trading Time        â”‚  â”‚
â”‚  â”‚ Server      â”‚ â”‚ Tool        â”‚ â”‚ Validator           â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ Fund        â”‚ â”‚ Portfolio   â”‚ â”‚ Strategy            â”‚  â”‚
â”‚  â”‚ Validator   â”‚ â”‚ Manager     â”‚ â”‚ Manager             â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚ è³‡æ–™å­˜å–
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                  è³‡æ–™å±¤ (Data Layer)                      â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ Agent       â”‚ â”‚ Trading     â”‚ â”‚ Strategy &          â”‚  â”‚
â”‚  â”‚ Sessions    â”‚ â”‚ Records     â”‚ â”‚ Decision Logs       â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ Portfolio   â”‚ â”‚ Market      â”‚ â”‚ Configuration       â”‚  â”‚
â”‚  â”‚ Data        â”‚ â”‚ Data Cache  â”‚ â”‚ Database            â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 2. æŠ€è¡“å †ç–Š

#### 2.1 å¾Œç«¯æŠ€è¡“

```yaml
Webæ¡†æž¶: FastAPI 0.104+
AIä»£ç†äºº: OpenAI Agents SDK (Python)
æœƒè©±ç®¡ç†: SQLiteSession (Agent SDK å…§å»º)
è³‡æ–™åº«: SQLite 3.x
é€šä¿¡å”è­°: WebSocket, REST API
å¸‚å ´è³‡æ–™: MCP (Model Context Protocol)
éžåŒæ­¥è™•ç†: asyncio, aiohttp
å·¥å…·æ•´åˆ: MCP Tools, WebSearch, Custom Tools
```

#### 2.2 AI ä»£ç†äººæŠ€è¡“

```yaml
æ¡†æž¶: OpenAI Agents Python SDK
æ”¯æ´æ¨¡åž‹:
  - OpenAI GPT-4o-mini
  - OpenAI GPT-4o
  - DeepSeek API
  - Grok API
  - Google Gemini API
æœƒè©±æŒä¹…åŒ–: SQLiteSession
å¤šä»£ç†äººå”ä½œ: Agent Handoffs
å·¥å…·èª¿ç”¨: Function Calling
è¿½è¹¤ç³»çµ±: Built-in Tracing
```

#### 2.3 å‰ç«¯æŠ€è¡“

```yaml
æ ¸å¿ƒæ¡†æž¶: Vanilla JavaScript (ES2022+)
åœ–è¡¨åº«: Chart.js 4.x
æ¨£å¼æ¡†æž¶: Tailwind CSS 3.x
å­—é«”: Inter + Noto Sans TC
å³æ™‚é€šä¿¡: WebSocket API
æ¨¡çµ„ç³»çµ±: ES Modules
è¨­å®šç®¡ç†: æœ¬åœ°å„²å­˜ + å¾Œç«¯æŒä¹…åŒ–
```

#### 2.4 å¤–éƒ¨æœå‹™èˆ‡å·¥å…· (åŸºæ–¼ casual-market-mcp)

```yaml
æ ¸å¿ƒæ•¸æ“šå¼•æ“Ž: casual-market-mcp (21 å€‹å°ˆæ¥­å·¥å…·)
  å³æ™‚å¸‚å ´æ•¸æ“š:
    - è‚¡ç¥¨å³æ™‚åƒ¹æ ¼èˆ‡åŸºæœ¬è³‡è¨Š
    - å¸‚å ´æŒ‡æ•¸è³‡è¨Š(åŠ æ¬Šã€é¡žè‚¡)
    - æ­·å²æŒ‡æ•¸æ•¸æ“š
    - å³æ™‚äº¤æ˜“çµ±è¨ˆ(5åˆ†é˜æ›´æ–°)
  
  è‚¡ç¥¨äº¤æ˜“æ•¸æ“š:
    - æ—¥/æœˆ/å¹´äº¤æ˜“è³‡è¨Š
    - æœˆå¹³å‡åƒ¹æ ¼
    - ä¼°å€¼æ¯”çŽ‡(P/E, P/B, æ®–åˆ©çŽ‡)
  
  å…¬å¸è²¡å‹™æ•¸æ“š:
    - å…¬å¸åŸºæœ¬è³‡æ–™
    - è³‡ç”¢è² å‚µè¡¨(è‡ªå‹•ç”¢æ¥­åˆ¥åµæ¸¬)
    - ç¶œåˆæç›Šè¡¨(è‡ªå‹•ç”¢æ¥­åˆ¥åµæ¸¬)
    - æœˆç‡Ÿæ”¶è³‡è¨Š
    - è‚¡åˆ©åˆ†é…è³‡è¨Š
  
  å¸‚å ´è³‡é‡‘å‹•å‘:
    - èžè³‡èžåˆ¸è³‡è¨Š
    - å¤–è³‡æŒè‚¡(æŒ‰ç”¢æ¥­/å‰20å)
    - ETFå®šæœŸå®šé¡æŽ’å
  
  è¡Œäº‹æ›†:
    - é™¤æ¬Šæ¯è¡Œäº‹æ›†
  
  æ¨¡æ“¬äº¤æ˜“:
    - è²·å…¥/è³£å‡ºåŸ·è¡Œ(æ”¯æ´å¸‚åƒ¹/é™åƒ¹)
    - æ‰‹çºŒè²»è‡ªå‹•è¨ˆç®—(0.2% spread)

ç¶²è·¯æœå°‹: OpenAI WebSearch API (å…§å»º)
  - å¸‚å ´æ–°èžèˆ‡æƒ…å ±
  - å…¬å¸éžçµæ§‹åŒ–è³‡è¨Š
  - ç”¢æ¥­è¶¨å‹¢å ±å°Ž

å°ˆæ¥­ Agent å·¥å…·:
  - é‡‘èžç ”ç©¶å“¡ Agent (ä½¿ç”¨ casual-market-mcp è²¡å‹™æ•¸æ“š)
  - æŠ€è¡“åˆ†æžå¸« Agent (ä½¿ç”¨ casual-market-mcp äº¤æ˜“æ•¸æ“š)
  - é¢¨éšªè©•ä¼°å¸« Agent (ä½¿ç”¨ casual-market-mcp å¸‚å ´æ•¸æ“š)

ç°¡åŒ–å¯¦ä½œå·¥å…·:
  - äº¤æ˜“æ™‚é–“é©—è­‰ (æ•´åˆåˆ°äº¤æ˜“æµç¨‹)
  - æŠ•è³‡çµ„åˆç®¡ç† (æœ¬åœ°è¨˜éŒ„ + casual-market-mcp å³æ™‚åƒ¹æ ¼)
```

### 3. è³‡æ–™æ¨¡åž‹è¨­è¨ˆ

#### 3.1 AIä»£ç†äººæ¨¡åž‹

```python
from agents import Agent, SQLiteSession
from pydantic import BaseModel
from datetime import datetime
from typing import Dict, Any, List

class TradingAgent(BaseModel):
    id: str
    name: str
    ai_model: str  # GPT-4o-mini, GPT-4o, DeepSeek, Grok, Gemini
    strategy_prompt: str  # å®Œæ•´ç­–ç•¥ promptï¼ˆä¾†è‡ªå‰ç«¯è¼¸å…¥ï¼‰
    color: str  # RGB values
    initial_balance: float
    current_balance: float
    portfolio_value: float
    status: AgentStatus  # running, stopped, researching, trading
    session_id: str  # SQLiteSession identifierï¼ˆèˆ‡è³‡æ–™åº«æ•´åˆï¼‰
    created_at: datetime
    last_active: datetime

class StrategyAdjustment(BaseModel):
    id: str
    agent_id: str
    timestamp: datetime
    old_prompt: str
    new_prompt: str
    reason: str
    agent_rationale: str
```

#### 3.2 äº¤æ˜“è¨˜éŒ„èˆ‡æ±ºç­–æ¨¡åž‹

```python
class Transaction(BaseModel):
    id: str
    agent_id: str
    symbol: str
    company_name: str
    action: TradeAction  # BUY, SELL
    quantity: int
    price: float
    total_amount: float
    fees: float
    timestamp: datetime
    rationale: str  # AI æŠ•è³‡åŽŸå› 
    analysis_data: Dict[str, Any]  # åˆ†æžæ•¸æ“š
    tools_used: List[str]  # ä½¿ç”¨çš„å·¥å…·è¨˜éŒ„
    pre_trade_validation: PreTradeValidation

class PreTradeValidation(BaseModel):
    trading_hours_valid: bool
    fund_sufficient: bool
    risk_acceptable: bool
    strategy_compliant: bool
    validation_timestamp: datetime
    validation_details: Dict[str, Any]

class InvestmentDecision(BaseModel):
    id: str
    agent_id: str
    decision_type: str  # research, buy, sell, hold, strategy_adjust
    timestamp: datetime
    reasoning: str
    data_sources: List[str]  # WebSearch, é‡‘èžç ”ç©¶å“¡Agentç­‰
    market_context: Dict[str, Any]
    confidence_level: float  # 0.0 - 1.0

class Portfolio(BaseModel):
    agent_id: str
    holdings: Dict[str, HoldingInfo]
    cash_balance: float
    total_value: float
    risk_metrics: RiskMetrics
    last_updated: datetime

class HoldingInfo(BaseModel):
    symbol: str
    company_name: str
    quantity: int
    average_cost: float
    current_price: float
    market_value: float
    unrealized_pnl: float
    percentage_of_portfolio: float
    purchase_rationale: List[str]  # æ­·æ¬¡è²·å…¥åŽŸå› 

class RiskMetrics(BaseModel):
    concentration_risk: float  # é›†ä¸­åº¦é¢¨éšª
    sector_allocation: Dict[str, float]
    volatility_score: float
    diversification_score: float
```

#### 3.3 å¸‚å ´è³‡æ–™æ¨¡åž‹

```python
class StockPrice(BaseModel):
    symbol: str
    price: float
    change: float
    change_percent: float
    timestamp: datetime

class MarketData(BaseModel):
    symbol: str
    company_name: str
    industry: str
    current_price: float
    day_high: float
    day_low: float
```

---

## ðŸ”„ API è¦æ ¼è¨­è¨ˆ

### 1. REST API ç«¯é»ž

#### 1.1 ä»£ç†äººç®¡ç†

```http
GET    /api/agents                    # å–å¾—æ‰€æœ‰ä»£ç†äºº
POST   /api/agents                    # å‰µå»ºæ–°ä»£ç†äºº
GET    /api/agents/{id}               # å–å¾—æŒ‡å®šä»£ç†äºº
PUT    /api/agents/{id}               # æ›´æ–°ä»£ç†äººè¨­å®š
DELETE /api/agents/{id}               # åˆªé™¤ä»£ç†äºº

POST   /api/agents/{id}/start         # å•Ÿå‹•ä»£ç†äºº
POST   /api/agents/{id}/stop          # åœæ­¢ä»£ç†äºº
PUT    /api/agents/{id}/strategy      # æ›´æ–°ç­–ç•¥
POST   /api/agents/{id}/reset         # é‡ç½®å¸³æˆ¶
```

#### 1.2 äº¤æ˜“èˆ‡å¸³æˆ¶

```http
GET    /api/agents/{id}/portfolio     # å–å¾—æŠ•è³‡çµ„åˆ
GET    /api/agents/{id}/transactions  # å–å¾—äº¤æ˜“æ­·å²
GET    /api/agents/{id}/performance   # å–å¾—ç¸¾æ•ˆæ•¸æ“š
```

#### 1.3 å¸‚å ´è³‡æ–™

```http
GET    /api/market/stocks             # å–å¾—è‚¡ç¥¨æ¸…å–®
GET    /api/market/stocks/{symbol}    # å–å¾—è‚¡ç¥¨è³‡è¨Š
GET    /api/market/price/{symbol}     # å–å¾—å³æ™‚åƒ¹æ ¼
```

### 2. WebSocket äº‹ä»¶è¦æ ¼

#### 2.1 äº‹ä»¶é¡žåž‹å®šç¾©

```typescript
interface WebSocketEvent {
  type:
    | "agent_status"
    | "trade_executed"
    | "portfolio_update"
    | "market_update";
  timestamp: string;
  data: any;
}

interface AgentStatusEvent {
  type: "agent_status";
  agent_id: string;
  status: "running" | "stopped" | "researching" | "trading";
  message?: string;
}

interface TradeExecutedEvent {
  type: "trade_executed";
  agent_id: string;
  trade: {
    action: "BUY" | "SELL";
    symbol: string;
    quantity: number;
    price: number;
    rationale: string;
  };
}
```

---

## ðŸ’» ç”¨æˆ¶ä»‹é¢è¦æ ¼

### 1. ä¸»å„€è¡¨æ¿è¨­è¨ˆ

#### 1.1 å¸ƒå±€çµæ§‹

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        æ¨™é¡Œåˆ—                           â”‚
â”‚          AI è‚¡ç¥¨äº¤æ˜“æ¨¡æ“¬å™¨ + è¨­å®šæŒ‰éˆ•                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      æŽ§åˆ¶é¢æ¿                           â”‚
â”‚     èªªæ˜Žæ–‡å­— + å…¨åŸŸæŽ§åˆ¶æŒ‰éˆ• (å…¨éƒ¨å•Ÿå‹•/åœæ­¢)               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                   ä»£ç†äººå¡ç‰‡ç¶²æ ¼                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ Agent #1    â”‚ â”‚ Agent #2    â”‚ â”‚ Agent #3            â”‚  â”‚
â”‚  â”‚ ç©©å¥åž‹      â”‚ â”‚ ç©æ¥µåž‹      â”‚ â”‚ å¹³è¡¡åž‹              â”‚  â”‚
â”‚  â”‚ [åœ–è¡¨]      â”‚ â”‚ [åœ–è¡¨]      â”‚ â”‚ [åœ–è¡¨]              â”‚  â”‚
â”‚  â”‚ [æŒè‚¡æ¸…å–®]  â”‚ â”‚ [æŒè‚¡æ¸…å–®]  â”‚ â”‚ [æŒè‚¡æ¸…å–®]          â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### 1.2 ä»£ç†äººå¡ç‰‡å…ƒç´ 

- **æ¨™é¡Œå€åŸŸ**: ä»£ç†äººåç¨± + ç­–ç•¥é¡è‰²
- **æ•¸æ“šé¡¯ç¤º**: ç¸½è³‡ç”¢ã€æç›Šã€ç¾é‡‘é¤˜é¡
- **åœ–è¡¨å€åŸŸ**: Chart.js å³æ™‚è³‡ç”¢åƒ¹å€¼æ›²ç·š
- **æŒè‚¡åˆ—è¡¨**: ç•¶å‰æŒæœ‰è‚¡ç¥¨çš„ç°¡è¦ä¿¡æ¯
- **ç‹€æ…‹æŒ‡ç¤º**: é‹è¡Œç‹€æ…‹çš„è¦–è¦ºæŒ‡ç¤ºå™¨

### 2. è©³ç´°æ¨¡æ…‹è¦–çª—

#### 2.1 å¸ƒå±€åˆ†å‰²

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  æ¨™é¡Œ: Agentåç¨± (ç­–ç•¥è‰²å½©) + é—œé–‰æŒ‰éˆ•                    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚     åœ–è¡¨èˆ‡æ•¸æ“šå€      â”‚ â”‚        æŒè‚¡èˆ‡æ­·å²å€         â”‚ â”‚
â”‚ â”‚                       â”‚ â”‚                             â”‚ â”‚
â”‚ â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚ â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚ â”‚
â”‚ â”‚  â”‚ ç¸½è³‡ç”¢|æç›Š|ç¾é‡‘ â”‚   â”‚ â”‚  â”‚      æŒæœ‰è‚¡ç¥¨       â”‚    â”‚ â”‚
â”‚ â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚ â”‚  â”‚  - 2330 å°ç©é›»      â”‚    â”‚ â”‚
â”‚ â”‚                       â”‚ â”‚  â”‚  - 2317 é´»æµ·        â”‚    â”‚ â”‚
â”‚ â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚ â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚ â”‚
â”‚ â”‚  â”‚                 â”‚   â”‚ â”‚                             â”‚ â”‚
â”‚ â”‚  â”‚   Chart.jsåœ–è¡¨  â”‚   â”‚ â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚ â”‚
â”‚ â”‚  â”‚                 â”‚   â”‚ â”‚  â”‚      äº¤æ˜“æ­·å²       â”‚    â”‚ â”‚
â”‚ â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚ â”‚  â”‚  [æ™‚é–“] BUY 2330    â”‚    â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚  â”‚  [æ™‚é–“] SELL 2317   â”‚    â”‚ â”‚
â”‚                           â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚ â”‚
â”‚                           â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 3. è¨­å®šç®¡ç†ä»‹é¢ (åŸºæ–¼å‰ç«¯åŽŸåž‹)

#### 3.1 Agent ç®¡ç†åŠŸèƒ½

- **Agent åˆ—è¡¨**: é¡¯ç¤ºæ‰€æœ‰å·²å‰µå»ºçš„ Agent åŠå…¶ç‹€æ…‹
- **ç·¨è¼¯åŠŸèƒ½**: ä¿®æ”¹ Agent é…ç½®
- **åˆªé™¤åŠŸèƒ½**: ç§»é™¤ Agent åŠå…¶æ‰€æœ‰è³‡æ–™
- **æ–°å¢žåŠŸèƒ½**: å‰µå»ºæ–°çš„ AI Agent

#### 3.2 æ–°å¢ž/ç·¨è¼¯ Agent è¡¨å–®

```text
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              æ–°å¢ž/ç·¨è¼¯ AI Agent           â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  Agent åç¨±: [è¼¸å…¥æ¡†]                    â”‚
â”‚  AI æ¨¡åž‹:    [ä¸‹æ‹‰é¸å–®] GPT-4o-mini     â”‚
â”‚                â—‹ GPT-4o-mini           â”‚
â”‚                â—‹ GPT-4o                â”‚
â”‚                â—‹ DeepSeek              â”‚
â”‚                â—‹ Grok                  â”‚
â”‚                â—‹ Gemini                â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  ç­–ç•¥ Prompt: [å¤§åž‹æ–‡å­—æ¡†]               â”‚
â”‚  [é è¨­æ¨¡æ¿] [ç©©å¥åž‹] [ç©æ¥µåž‹] [åƒ¹å€¼æŠ•è³‡]  â”‚
â”‚                                         â”‚
â”‚  ä½ æ˜¯ä¸€ä½å°ˆæ¥­çš„æŠ•è³‡è€…...                â”‚
â”‚  (æ”¯æ´å®Œå…¨è‡ªè¨‚æŠ•è³‡ç­–ç•¥æè¿°)              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  ä¸»é«”é¡è‰²:   [é¡è‰²é¸æ“‡å™¨] #22C55E        â”‚
â”‚  åˆå§‹è³‡é‡‘:   [æ•¸å­—è¼¸å…¥] 1,000,000 TWD   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  å·¥å…·é…ç½®: æ‰€æœ‰å¯ç”¨å·¥å…· (è‡ªå‹•é…ç½®)        â”‚
â”‚  â€¢ Market MCP Server                   â”‚
â”‚  â€¢ WebSearch Tool                      â”‚
â”‚  â€¢ é‡‘èžç ”ç©¶å“¡ Agent                     â”‚
â”‚  â€¢ äº¤æ˜“é©—è­‰å·¥å…·                         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚          [é‡è¨­ Prompt] [å–æ¶ˆ] [å„²å­˜]      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### 3.3 ç­–ç•¥æ­·å²è¿½è¹¤

```text
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚            Agent ç­–ç•¥èª¿æ•´æ­·å²             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  [2025-01-10 14:30] ç­–ç•¥è‡ªä¸»èª¿æ•´         â”‚
â”‚  è®Šæ›´åŽŸå› : å¸‚å ´æ³¢å‹•åŠ åŠ‡ï¼Œé™ä½Žé¢¨éšªåå¥½    â”‚
â”‚  AI åˆ†æž: åŸºæ–¼è¿‘æœŸæŠ€è¡“æŒ‡æ¨™å’Œå¸‚å ´æ•¸æ“š...  â”‚
â”‚  [æŸ¥çœ‹å®Œæ•´ Prompt è®Šæ›´]                 â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  [2025-01-08 10:15] æ‰‹å‹•ç­–ç•¥é‡è¨­         â”‚
â”‚  è®Šæ›´åŽŸå› : ä½¿ç”¨è€…é‡è¨­ç‚ºç©©å¥åž‹æ¨¡æ¿        â”‚
â”‚  [æŸ¥çœ‹è®Šæ›´è©³æƒ…]                         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚              [åŒ¯å‡ºæ­·å²] [é‡è¨­ç‚ºåˆå§‹ Prompt] â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ðŸ“± éŸ¿æ‡‰å¼è¨­è¨ˆè¦æ ¼

### 1. æ–·é»žè¨­å®š

```css
/* æ‰‹æ©Ÿç‰ˆ */
@media (max-width: 768px) {
  .agent-grid {
    grid-template-columns: 1fr;
  }
}

/* å¹³æ¿ç‰ˆ */
@media (min-width: 769px) and (max-width: 1024px) {
  .agent-grid {
    grid-template-columns: repeat(2, 1fr);
  }
}

/* æ¡Œé¢ç‰ˆ */
@media (min-width: 1025px) {
  .agent-grid {
    grid-template-columns: repeat(3, 1fr);
  }
}
```

### 2. äº’å‹•è¨­è¨ˆ

- **æ‡¸åœæ•ˆæžœ**: å¡ç‰‡é‚Šæ¡†é«˜äº®
- **é»žæ“Šåé¥‹**: æŒ‰éˆ•æŒ‰ä¸‹å‹•ç•«
- **è¼‰å…¥ç‹€æ…‹**: éª¨æž¶å±é¡¯ç¤º
- **äº¤æ˜“å‹•ç•«**: é–ƒçˆæ•ˆæžœè¡¨ç¤ºäº¤æ˜“åŸ·è¡Œ

---

## ðŸš€ é–‹ç™¼é‡Œç¨‹ç¢‘ (ç°¡åŒ–ç‰ˆ - åŸºæ–¼ casual-market-mcp å®Œæ•´åŠŸèƒ½)

**ðŸŽ‰ å·²å®Œæˆ**: casual-market-mcp æä¾›å®Œæ•´çš„ 21 å€‹å°ç£è‚¡å¸‚æ•¸æ“šå·¥å…·,å¤§å¹…ç°¡åŒ–é–‹ç™¼å·¥ä½œ!

### Phase 1: MCP æ•´åˆèˆ‡ Agent åŸºç¤Žæž¶æ§‹ (Week 1-2)

**ç›®æ¨™**: å»ºç«‹èˆ‡ casual-market-mcp çš„é€£æŽ¥,å¯¦ç¾åŸºç¤Ž Agent æ¡†æž¶

- [ ] **MCP å®¢æˆ¶ç«¯æ•´åˆ**
  - [ ] è¨­ç½® MCP SDK ç’°å¢ƒ
  - [ ] å¯¦ç¾ casual-market-mcp å®¢æˆ¶ç«¯åŒ…è£å™¨
  - [ ] æ¸¬è©¦æ‰€æœ‰ 21 å€‹ MCP å·¥å…·çš„èª¿ç”¨
  - [ ] å»ºç«‹ MCP é€£æŽ¥æ± å’ŒéŒ¯èª¤è™•ç†æ©Ÿåˆ¶

- [ ] **OpenAI Agent SDK åŸºç¤Ž**
  - [ ] è¨­ç½® OpenAI Agents Python SDK ç’°å¢ƒ
  - [ ] å¯¦ç¾ SQLiteSession æœƒè©±ç®¡ç†
  - [ ] å»ºç«‹ Agent é…ç½®ç³»çµ±(å¾žå‰ç«¯ JSON å‰µå»º Agent)
  - [ ] å¯¦ç¾ Agent ç”Ÿå‘½é€±æœŸç®¡ç†å™¨

- [ ] **åŸºç¤Žå·¥å…·å¯¦ä½œ**
  - [ ] äº¤æ˜“åŸ·è¡Œå™¨(æ•´åˆæ™‚é–“é©—è­‰ + MCP äº¤æ˜“èª¿ç”¨)
  - [ ] æŠ•è³‡çµ„åˆç®¡ç†å™¨(æœ¬åœ°è¨˜éŒ„ + MCP å³æ™‚åƒ¹æ ¼æ›´æ–°)
  - [ ] ç­–ç•¥ Prompt æ¨¡æ¿ç³»çµ±(5 ç¨®é è¨­ç­–ç•¥)

### Phase 2: å°ˆæ¥­ Agent èˆ‡æ™ºèƒ½æ±ºç­–ç³»çµ± (Week 3-4)

**ç›®æ¨™**: å¯¦ç¾ä¸‰å€‹å°ˆæ¥­ Agent,å»ºç«‹ Agent-as-Tool æž¶æ§‹

- [ ] **é‡‘èžç ”ç©¶å“¡ Agent** (é…ç½® casual-market-mcp è²¡å‹™æ•¸æ“šå·¥å…·)
  - [ ] Agent Instructions è¨­è¨ˆèˆ‡èª¿å„ª
  - [ ] æ•´åˆè²¡å ±ã€ç‡Ÿæ”¶ã€ä¼°å€¼æ•¸æ“šå·¥å…·
  - [ ] åŸºæœ¬é¢åˆ†æžèƒ½åŠ›æ¸¬è©¦
  - [ ] æŠ•è³‡å»ºè­°ç”ŸæˆåŠŸèƒ½

- [ ] **æŠ€è¡“åˆ†æžå¸« Agent** (é…ç½® casual-market-mcp äº¤æ˜“æ•¸æ“šå·¥å…·)
  - [ ] Agent Instructions è¨­è¨ˆèˆ‡èª¿å„ª
  - [ ] æ•´åˆåƒ¹æ ¼ã€æˆäº¤é‡ã€å¸‚å ´å‹•å‘å·¥å…·
  - [ ] æŠ€è¡“é¢åˆ†æžèƒ½åŠ›æ¸¬è©¦
  - [ ] è²·è³£æ™‚æ©Ÿåˆ¤æ–·åŠŸèƒ½

- [ ] **é¢¨éšªè©•ä¼°å¸« Agent** (é…ç½® casual-market-mcp å¸‚å ´æ•¸æ“šå·¥å…·)
  - [ ] Agent Instructions è¨­è¨ˆèˆ‡èª¿å„ª
  - [ ] æ•´åˆä¼°å€¼ã€å¸‚å ´é¢¨éšªã€è³‡é‡‘å‹•å‘å·¥å…·
  - [ ] é¢¨éšªè©•ä¼°èƒ½åŠ›æ¸¬è©¦
  - [ ] éƒ¨ä½æŽ§åˆ¶å»ºè­°åŠŸèƒ½

- [ ] **äº¤æ˜“ Agent æ•´åˆ**
  - [ ] é…ç½®å°ˆæ¥­ Agent ä½œç‚ºé¡§å•å·¥å…·
  - [ ] å¤š Agent å”ä½œæ±ºç­–æµç¨‹
  - [ ] æŠ•è³‡æ±ºç­–è¨˜éŒ„èˆ‡è¿½è¹¤
  - [ ] ç­–ç•¥åŸ·è¡Œèˆ‡èª¿æ•´æ©Ÿåˆ¶

### Phase 3: FastAPI Backend èˆ‡ WebSocket å³æ™‚é€šä¿¡ (Week 5)

**ç›®æ¨™**: å»ºç«‹ Web æœå‹™å±¤,å¯¦ç¾å‰å¾Œç«¯å³æ™‚é€šä¿¡

- [ ] **REST API é–‹ç™¼**
  - [ ] Agent CRUD API (å‰µå»º/è®€å–/æ›´æ–°/åˆªé™¤)
  - [ ] äº¤æ˜“æ­·å² API
  - [ ] æŠ•è³‡çµ„åˆ API
  - [ ] å¸‚å ´æ•¸æ“šä»£ç† API (è½‰ç™¼ casual-market-mcp)
  - [ ] ç­–ç•¥é…ç½® API

- [ ] **WebSocket å³æ™‚æŽ¨é€**
  - [ ] WebSocket é€£ç·šç®¡ç†
  - [ ] äº‹ä»¶ç³»çµ±è¨­è¨ˆ(agent_status, trade_executed, portfolio_update)
  - [ ] Agent æ±ºç­–éŽç¨‹å³æ™‚å»£æ’­
  - [ ] äº¤æ˜“åŸ·è¡Œå‹•ç•«è§¸ç™¼

- [ ] **æ•¸æ“šåº«è¨­è¨ˆèˆ‡å¯¦ä½œ**
  - [ ] SQLAlchemy ORM æ¨¡åž‹
  - [ ] Agent é…ç½®æŒä¹…åŒ–
  - [ ] äº¤æ˜“è¨˜éŒ„èˆ‡æŠ•è³‡åŽŸå› å„²å­˜
  - [ ] ç­–ç•¥èª¿æ•´æ­·å²è¨˜éŒ„
  - [ ] Repository Pattern è³‡æ–™å­˜å–å±¤

### Phase 4: å‰ç«¯å„€è¡¨æ¿èˆ‡è¦–è¦ºåŒ– (Week 6)

**ç›®æ¨™**: å¯¦ç¾å³æ™‚å„€è¡¨æ¿å’Œäº’å‹•å¼è¦–è¦ºåŒ–

- [ ] **ä¸»å„€è¡¨æ¿é–‹ç™¼** (Vanilla JS + Tailwind CSS)
  - [ ] Agent å¡ç‰‡ç¶²æ ¼ä½ˆå±€
  - [ ] å³æ™‚æ•¸æ“šæ›´æ–°(WebSocket é©…å‹•)
  - [ ] Chart.js è³‡ç”¢åƒ¹å€¼æ›²ç·šåœ–
  - [ ] æŒè‚¡åˆ†å¸ƒé¡¯ç¤º
  - [ ] äº¤æ˜“å‹•ç•«æ•ˆæžœ

- [ ] **Agent è¨­å®šç•Œé¢**
  - [ ] Agent å‰µå»ºè¡¨å–®(åç¨±/æ¨¡åž‹/ç­–ç•¥/é¡è‰²/è³‡é‡‘)
  - [ ] ç­–ç•¥ Prompt ç·¨è¼¯å™¨(æ”¯æ´é è¨­æ¨¡æ¿)
  - [ ] Agent ç·¨è¼¯èˆ‡åˆªé™¤åŠŸèƒ½
  - [ ] ç­–ç•¥èª¿æ•´æ­·å²æŸ¥çœ‹

- [ ] **è©³ç´°æ¨¡æ…‹è¦–çª—**
  - [ ] æŠ•è³‡çµ„åˆè©³æƒ…
  - [ ] äº¤æ˜“æ­·å²æ™‚é–“è»¸
  - [ ] æŠ•è³‡æ±ºç­–åŽŸå› å±•ç¤º
  - [ ] ç¸¾æ•ˆåˆ†æžåœ–è¡¨

- [ ] **éŸ¿æ‡‰å¼è¨­è¨ˆ**
  - [ ] æ‰‹æ©Ÿ/å¹³æ¿/æ¡Œé¢é©é…
  - [ ] è¼‰å…¥éª¨æž¶å±
  - [ ] éŒ¯èª¤æç¤ºèˆ‡è™•ç†

### Phase 5: é€²éšŽåŠŸèƒ½èˆ‡å„ªåŒ– (Week 7-8)

**ç›®æ¨™**: å¢žå¼·ç³»çµ±åŠŸèƒ½,å„ªåŒ–ç”¨æˆ¶é«”é©—

- [ ] **Agent æ™ºèƒ½åŠŸèƒ½**
  - [ ] ç­–ç•¥å‹•æ…‹èª¿æ•´(Agent è‡ªä¸»å„ªåŒ–ç­–ç•¥)
  - [ ] å¤š Agent ç«¶è³½æ¨¡å¼
  - [ ] å›žæ¸¬åŠŸèƒ½(åŸºæ–¼æ­·å²æ•¸æ“š)
  - [ ] é¢¨éšªé è­¦ç³»çµ±

- [ ] **æ•¸æ“šåˆ†æžèˆ‡å ±å‘Š**
  - [ ] Agent ç¸¾æ•ˆæ¯”è¼ƒåˆ†æž
  - [ ] æŠ•è³‡ç­–ç•¥æ•ˆæžœè©•ä¼°
  - [ ] å¸‚å ´è¶¨å‹¢æ´žå¯Ÿ
  - [ ] äº¤æ˜“å ±å‘Šç”Ÿæˆ(PDF/Excel)

- [ ] **ç³»çµ±å„ªåŒ–**
  - [ ] MCP é€£æŽ¥æ± å„ªåŒ–
  - [ ] WebSocket è¨Šæ¯å£“ç¸®
  - [ ] å‰ç«¯å¿«å–ç­–ç•¥
  - [ ] è³‡æ–™åº«æŸ¥è©¢å„ªåŒ–

### Phase 6: æ¸¬è©¦ã€éƒ¨ç½²èˆ‡æ–‡æª” (Week 9+)

**ç›®æ¨™**: ç¢ºä¿ç³»çµ±ç©©å®šæ€§,æº–å‚™ç”Ÿç”¢éƒ¨ç½²

- [ ] **æ¸¬è©¦é«”ç³»**
  - [ ] Agent å–®å…ƒæ¸¬è©¦(æ¨¡æ“¬ MCP å›žæ‡‰)
  - [ ] API æ•´åˆæ¸¬è©¦
  - [ ] WebSocket é€£æŽ¥æ¸¬è©¦
  - [ ] ç«¯åˆ°ç«¯æ¸¬è©¦(å®Œæ•´äº¤æ˜“æµç¨‹)
  - [ ] å£“åŠ›æ¸¬è©¦(å¤š Agent ä¸¦ç™¼)

- [ ] **éƒ¨ç½²æº–å‚™**
  - [ ] Docker å®¹å™¨åŒ–
  - [ ] CI/CD Pipeline (GitHub Actions)
  - [ ] ç’°å¢ƒè®Šæ•¸ç®¡ç†
  - [ ] æ—¥èªŒèˆ‡ç›£æŽ§ç³»çµ±(Prometheus/Grafana)
  - [ ] éŒ¯èª¤è¿½è¹¤(Sentry)

- [ ] **æ–‡æª”å®Œå–„**
  - [ ] API æ–‡æª”(OpenAPI/Swagger)
  - [ ] Agent é–‹ç™¼æŒ‡å—
  - [ ] éƒ¨ç½²æ‰‹å†Š
  - [ ] ç”¨æˆ¶ä½¿ç”¨æŒ‡å—
  - [ ] æ•…éšœæŽ’é™¤æŒ‡å—

---

**é–‹ç™¼æ™‚ç¨‹ç¸½çµ** (åŸºæ–¼ casual-market-mcp å®Œæ•´åŠŸèƒ½):

- **Phase 1-2**: 4 é€± (Agent æž¶æ§‹èˆ‡æ™ºèƒ½ç³»çµ±)
- **Phase 3-4**: 2 é€± (Backend + Frontend)
- **Phase 5**: 2 é€± (é€²éšŽåŠŸèƒ½)
- **Phase 6**: 1+ é€± (æ¸¬è©¦èˆ‡éƒ¨ç½²)
- **ç¸½è¨ˆ**: ~9 é€± (ç›¸æ¯”åŽŸè¨ˆç•«ç¸®çŸ­,å› æ•¸æ“šå·¥å…·å·²å®Œå‚™)

**é—œéµå„ªå‹¢**:

âœ… casual-market-mcp æä¾› 21 å€‹å°ˆæ¥­å·¥å…·,ç„¡éœ€è‡ªå»ºæ•¸æ“šçˆ¬èŸ²
âœ… å°ˆæ³¨æ–¼ AI Agent æ™ºèƒ½æ±ºç­–,è€Œéžæ•¸æ“šç²å–
âœ… MCP å”è­°æ¨™æº–åŒ–,æ˜“æ–¼æ“´å±•å’Œç¶­è­·
âœ… Agent-as-Tool æž¶æ§‹,å°ˆæ¥­åˆ†å·¥æ˜Žç¢º

---

## ðŸ”§ æŠ€è¡“å¯¦ç¾ç´°ç¯€

### 1. å°ˆæ¡ˆç›®éŒ„çµæ§‹ (ç°¡åŒ–ç‰ˆ - åŸºæ–¼ casual-market-mcp)

```text
CasualTrader/
â”œâ”€â”€ src/                        # ä¸»è¦åŽŸå§‹ç¢¼ç›®éŒ„
â”‚   â”œâ”€â”€ agent/                  # AI ä»£ç†äººå±¤
â”‚   â”‚   â”œâ”€â”€ __init__.py
â”‚   â”‚   â”œâ”€â”€ trading_agent.py    # äº¤æ˜“ä»£ç†äººæ ¸å¿ƒ
â”‚   â”‚   â”œâ”€â”€ agent_manager.py    # ä»£ç†äººç®¡ç†å™¨
â”‚   â”‚   â”œâ”€â”€ session_manager.py  # SQLiteSession ç®¡ç†
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ prompts/            # ç­–ç•¥ Prompt Templates
â”‚   â”‚   â”‚   â”œâ”€â”€ conservative_strategy.txt    # ç©©å¥åž‹ç­–ç•¥
â”‚   â”‚   â”‚   â”œâ”€â”€ aggressive_strategy.txt      # ç©æ¥µåž‹ç­–ç•¥
â”‚   â”‚   â”‚   â”œâ”€â”€ balanced_strategy.txt        # å¹³è¡¡åž‹ç­–ç•¥
â”‚   â”‚   â”‚   â”œâ”€â”€ value_investing.txt          # åƒ¹å€¼æŠ•è³‡ç­–ç•¥
â”‚   â”‚   â”‚   â””â”€â”€ momentum_trading.txt         # å‹•é‡äº¤æ˜“ç­–ç•¥
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ specialist_agents/  # å°ˆæ¥­åŠŸèƒ½ Agent (Agent-as-Tool)
â”‚   â”‚   â”‚   â”œâ”€â”€ __init__.py
â”‚   â”‚   â”‚   â”œâ”€â”€ research_agent.py      # é‡‘èžç ”ç©¶å“¡ Agent (ä½¿ç”¨ casual-market-mcp è²¡å‹™æ•¸æ“š)
â”‚   â”‚   â”‚   â”œâ”€â”€ technical_agent.py     # æŠ€è¡“åˆ†æžå¸« Agent (ä½¿ç”¨ casual-market-mcp äº¤æ˜“æ•¸æ“š)
â”‚   â”‚   â”‚   â””â”€â”€ risk_agent.py          # é¢¨éšªè©•ä¼°å¸« Agent (ä½¿ç”¨ casual-market-mcp å¸‚å ´æ•¸æ“š)
â”‚   â”‚   â”‚
â”‚   â”‚   â””â”€â”€ tools/              # ç°¡åŒ–å·¥å…·é›† (å¤§éƒ¨åˆ†ç”± casual-market-mcp æä¾›)
â”‚   â”‚       â”œâ”€â”€ __init__.py
â”‚   â”‚       â”œâ”€â”€ mcp_client.py          # casual-market-mcp å®¢æˆ¶ç«¯åŒ…è£
â”‚   â”‚       â”œâ”€â”€ portfolio_manager.py   # æŠ•è³‡çµ„åˆç®¡ç† (æœ¬åœ°è¨˜éŒ„ + MCP åƒ¹æ ¼)
â”‚   â”‚       â””â”€â”€ trade_executor.py      # äº¤æ˜“åŸ·è¡Œå™¨ (æ•´åˆé©—è­‰èˆ‡ MCP äº¤æ˜“)
â”‚   â”‚
â”‚   â”œâ”€â”€ backend/                # Web æœå‹™å±¤
â”‚   â”‚   â”œâ”€â”€ __init__.py
â”‚   â”‚   â”œâ”€â”€ main.py            # FastAPI æ‡‰ç”¨å…¥å£
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ api/               # REST API è·¯ç”±
â”‚   â”‚   â”‚   â”œâ”€â”€ __init__.py
â”‚   â”‚   â”‚   â”œâ”€â”€ agents.py      # ä»£ç†äºº CRUD API
â”‚   â”‚   â”‚   â”œâ”€â”€ trading.py     # äº¤æ˜“æ­·å² API
â”‚   â”‚   â”‚   â”œâ”€â”€ portfolio.py   # æŠ•è³‡çµ„åˆ API
â”‚   â”‚   â”‚   â”œâ”€â”€ market.py      # å¸‚å ´æ•¸æ“š API (ä»£ç† casual-market-mcp)
â”‚   â”‚   â”‚   â””â”€â”€ settings.py    # è¨­å®š API
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ websocket/         # WebSocket å³æ™‚é€šä¿¡
â”‚   â”‚   â”‚   â”œâ”€â”€ __init__.py
â”‚   â”‚   â”‚   â”œâ”€â”€ manager.py     # WebSocket é€£ç·šç®¡ç†
â”‚   â”‚   â”‚   â”œâ”€â”€ events.py      # äº‹ä»¶å®šç¾©
â”‚   â”‚   â”‚   â””â”€â”€ handlers.py    # äº‹ä»¶è™•ç†å™¨
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ models/            # Pydantic è³‡æ–™æ¨¡åž‹
â”‚   â”‚   â”‚   â”œâ”€â”€ __init__.py
â”‚   â”‚   â”‚   â”œâ”€â”€ agent.py       # Agent é…ç½®æ¨¡åž‹
â”‚   â”‚   â”‚   â”œâ”€â”€ trading.py     # äº¤æ˜“è¨˜éŒ„æ¨¡åž‹
â”‚   â”‚   â”‚   â”œâ”€â”€ portfolio.py   # æŠ•è³‡çµ„åˆæ¨¡åž‹
â”‚   â”‚   â”‚   â””â”€â”€ strategy.py    # ç­–ç•¥èª¿æ•´æ¨¡åž‹
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ services/          # æ¥­å‹™é‚è¼¯æœå‹™
â”‚   â”‚   â”‚   â”œâ”€â”€ __init__.py
â”‚   â”‚   â”‚   â”œâ”€â”€ agent_service.py     # Agent ç”Ÿå‘½é€±æœŸç®¡ç†
â”‚   â”‚   â”‚   â”œâ”€â”€ trading_service.py   # äº¤æ˜“åŸ·è¡Œå”èª¿
â”‚   â”‚   â”‚   â”œâ”€â”€ portfolio_service.py # æŠ•è³‡çµ„åˆè¨ˆç®—
â”‚   â”‚   â”‚   â””â”€â”€ market_service.py    # å¸‚å ´æ•¸æ“šæœå‹™ (æ•´åˆ casual-market-mcp)
â”‚   â”‚   â”‚
â”‚   â”‚   â””â”€â”€ database/          # è³‡æ–™åº«æ“ä½œ
â”‚   â”‚       â”œâ”€â”€ __init__.py
â”‚   â”‚       â”œâ”€â”€ connection.py  # SQLite é€£ç·š
â”‚   â”‚       â”œâ”€â”€ models.py      # SQLAlchemy ORM æ¨¡åž‹
â”‚   â”‚       â””â”€â”€ repositories.py # è³‡æ–™å­˜å–å±¤ (Repository Pattern)
â”‚   â”‚
â”‚   â””â”€â”€ frontend/              # å‰ç«¯æ‡‰ç”¨ (Vanilla JS)
â”‚       â”œâ”€â”€ index.html         # ä¸»å„€è¡¨æ¿é é¢
â”‚       â”œâ”€â”€ settings.html      # Agent è¨­å®šé é¢
â”‚       â”‚
â”‚       â”œâ”€â”€ js/                # JavaScript æ¨¡çµ„
â”‚       â”‚   â”œâ”€â”€ main.js        # æ‡‰ç”¨å…¥å£
â”‚       â”‚   â”œâ”€â”€ api-client.js  # API å®¢æˆ¶ç«¯
â”‚       â”‚   â”œâ”€â”€ websocket-client.js # WebSocket å®¢æˆ¶ç«¯
â”‚       â”‚   â”œâ”€â”€ agent-manager.js    # Agent ç®¡ç†åŠŸèƒ½
â”‚       â”‚   â”œâ”€â”€ dashboard.js   # å„€è¡¨æ¿æ¸²æŸ“
â”‚       â”‚   â”œâ”€â”€ charts.js      # Chart.js åœ–è¡¨
â”‚       â”‚   â”œâ”€â”€ portfolio-view.js   # æŠ•è³‡çµ„åˆè¦–åœ–
â”‚       â”‚   â””â”€â”€ utils.js       # å·¥å…·å‡½æ•¸
â”‚       â”‚
â”‚       â”œâ”€â”€ css/               # æ¨£å¼æª”æ¡ˆ (Tailwind CSS)
â”‚       â”‚   â”œâ”€â”€ main.css       # ä¸»æ¨£å¼
â”‚       â”‚   â”œâ”€â”€ dashboard.css  # å„€è¡¨æ¿æ¨£å¼
â”‚       â”‚   â”œâ”€â”€ settings.css   # è¨­å®šé é¢æ¨£å¼
â”‚       â”‚   â””â”€â”€ components.css # çµ„ä»¶æ¨£å¼
â”‚       â”‚
â”‚       â””â”€â”€ assets/            # éœæ…‹è³‡æº
â”‚           â”œâ”€â”€ icons/         # SVG åœ–æ¨™
â”‚           â””â”€â”€ fonts/         # Web å­—é«”
â”‚
â”œâ”€â”€ casual-market-mcp/         # å¤–éƒ¨ä¾è³´ (ç¨ç«‹å°ˆæ¡ˆ)
â”‚   â””â”€â”€ ...                    # casual-market-mcp å®Œæ•´åŠŸèƒ½ (21 å€‹å·¥å…·)
â”‚
â”œâ”€â”€ tests/                     # æ¸¬è©¦æª”æ¡ˆ
â”‚   â”œâ”€â”€ test_agents/          # Agent å–®å…ƒæ¸¬è©¦
â”‚   â”‚   â”œâ”€â”€ test_trading_agent.py
â”‚   â”‚   â”œâ”€â”€ test_research_agent.py
â”‚   â”‚   â””â”€â”€ test_specialist_agents.py
â”‚   â”œâ”€â”€ test_backend/         # Backend æ¸¬è©¦
â”‚   â”‚   â”œâ”€â”€ test_api.py
â”‚   â”‚   â”œâ”€â”€ test_websocket.py
â”‚   â”‚   â””â”€â”€ test_services.py
â”‚   â””â”€â”€ test_integration/     # æ•´åˆæ¸¬è©¦
â”‚       â”œâ”€â”€ test_agent_trading_flow.py
â”‚       â””â”€â”€ test_mcp_integration.py
â”‚
â”œâ”€â”€ docs/                      # æ–‡ä»¶
â”‚   â”œâ”€â”€ API.md                # API æ–‡ä»¶
â”‚   â”œâ”€â”€ AGENT_GUIDE.md        # Agent é–‹ç™¼æŒ‡å—
â”‚   â””â”€â”€ DEPLOYMENT.md         # éƒ¨ç½²æŒ‡å—
â”‚
â”œâ”€â”€ scripts/                   # å·¥å…·è…³æœ¬
â”‚   â”œâ”€â”€ setup_mcp.sh          # è¨­ç½® casual-market-mcp é€£æŽ¥
â”‚   â””â”€â”€ run_dev.sh            # é–‹ç™¼ç’°å¢ƒå•Ÿå‹•è…³æœ¬
â”‚
â”œâ”€â”€ .mcp.json                 # MCP é…ç½® (casual-market-mcp)
â”œâ”€â”€ pyproject.toml            # Python å°ˆæ¡ˆé…ç½®
â”œâ”€â”€ requirements.txt          # Python ä¾è³´
â””â”€â”€ README.md                 # å°ˆæ¡ˆèªªæ˜Ž
```

**æž¶æ§‹èªªæ˜Ž**:

1. **ç°¡åŒ–å·¥å…·å±¤**: å¤§å¹…æ¸›å°‘è‡ªå»ºå·¥å…·,ä¸»è¦ä¾è³´ casual-market-mcp çš„ 21 å€‹å°ˆæ¥­å·¥å…·
2. **å°ˆæ¥­ Agent ç›´æŽ¥ä½¿ç”¨ MCP**: ç ”ç©¶å“¡/æŠ€è¡“åˆ†æžå¸«/é¢¨éšªè©•ä¼°å¸«ç›´æŽ¥èª¿ç”¨ casual-market-mcp å·¥å…·
3. **æœ¬åœ°åªä¿ç•™**: æŠ•è³‡çµ„åˆç®¡ç†(è¨˜éŒ„)ã€äº¤æ˜“åŸ·è¡Œå”èª¿(é©—è­‰+èª¿ç”¨MCP)ã€Agent ç”Ÿå‘½é€±æœŸç®¡ç†
4. **æ¸…æ™°åˆ†å±¤**: Agent å±¤ â†’ Backend å±¤ â†’ Frontend å±¤,æ¯å±¤è·è²¬æ˜Žç¢º
5. **å¤–éƒ¨ä¾è³´**: casual-market-mcp ä½œç‚ºç¨ç«‹ MCP Server æä¾›æ‰€æœ‰å¸‚å ´æ•¸æ“š

### 2. ç’°å¢ƒè¨­å®š (æ›´æ–° - æ•´åˆ casual-market-mcp)

```bash
# æ ¸å¿ƒä¾è³´
fastapi[all]>=0.104.0
openai-agents-python>=0.2.9  # OpenAI Agent SDK
websockets>=11.0
uvicorn[standard]>=0.24.0
pydantic>=2.0.0
sqlalchemy>=2.0.0

# MCP å”è­°æ”¯æ´ (èˆ‡ casual-market-mcp é€šä¿¡)
mcp>=0.9.0                   # Model Context Protocol SDK
httpx>=0.25.0                # HTTP å®¢æˆ¶ç«¯

# AI æ¨¡åž‹ SDK
openai>=1.0.0                # OpenAI API
anthropic>=0.8.0             # Claude (å¯é¸)
google-generativeai>=0.3.0   # Gemini (å¯é¸)

# æ™‚é–“èˆ‡é©—è­‰
python-dateutil>=2.8.0
pytz>=2023.3                 # å°ç£æ™‚å€æ”¯æ´

# è³‡æ–™è™•ç†
pandas>=2.0.0                # æ•¸æ“šåˆ†æž(å¯é¸,ç”¨æ–¼è¤‡é›œè¨ˆç®—)

# é–‹ç™¼å·¥å…·
pytest>=7.4.0
pytest-asyncio>=0.21.0
black>=23.0.0
ruff>=0.1.0
mypy>=1.5.0

# æ¸¬è©¦å·¥å…·
pytest-mock>=3.11.0
```

### 3. MCP é…ç½® (.mcp.json)

```json
{
  "mcpServers": {
    "casual-market": {
      "type": "stdio",
      "command": "uvx",
      "args": [
        "--from",
        "/path/to/CasualMarket",
        "casual-market-mcp"
      ],
      "description": "å°ç£è‚¡å¸‚æ•¸æ“šèˆ‡æ¨¡æ“¬äº¤æ˜“ MCP Server (21 å€‹å°ˆæ¥­å·¥å…·)"
    }
  }
}
```

**casual-market-mcp æä¾›çš„ 21 å€‹å·¥å…·**:

1. `get_taiwan_stock_price` - å³æ™‚è‚¡åƒ¹
2. `get_market_index_info` - å¸‚å ´æŒ‡æ•¸
3. `get_market_historical_index` - æ­·å²æŒ‡æ•¸
4. `get_real_time_trading_stats` - å³æ™‚äº¤æ˜“çµ±è¨ˆ
5. `get_stock_daily_trading` - æ—¥äº¤æ˜“è³‡è¨Š
6. `get_stock_monthly_trading` - æœˆäº¤æ˜“è³‡è¨Š
7. `get_stock_yearly_trading` - å¹´äº¤æ˜“è³‡è¨Š
8. `get_stock_monthly_average` - æœˆå¹³å‡åƒ¹æ ¼
9. `get_stock_valuation_ratios` - ä¼°å€¼æ¯”çŽ‡
10. `get_company_profile` - å…¬å¸åŸºæœ¬è³‡æ–™
11. `get_company_balance_sheet` - è³‡ç”¢è² å‚µè¡¨
12. `get_company_income_statement` - ç¶œåˆæç›Šè¡¨
13. `get_company_monthly_revenue` - æœˆç‡Ÿæ”¶
14. `get_company_dividend` - è‚¡åˆ©åˆ†é…
15. `get_margin_trading_info` - èžè³‡èžåˆ¸
16. `get_foreign_investment_by_industry` - å¤–è³‡æŒè‚¡(ç”¢æ¥­)
17. `get_top_foreign_holdings` - å¤–è³‡æŒè‚¡å‰20
18. `get_etf_regular_investment_ranking` - ETFæŽ’å
19. `get_dividend_rights_schedule` - é™¤æ¬Šæ¯è¡Œäº‹æ›†
20. `buy_taiwan_stock` - æ¨¡æ“¬è²·å…¥
21. `sell_taiwan_stock` - æ¨¡æ“¬è³£å‡º

```

### 3. Agent å·¥å…·é…ç½®è¦æ ¼

#### 3.1 å·¥å…·è¨»å†Šèˆ‡ç®¡ç†

```python
from agents import Agent
from typing import List, Dict, Any

class ToolManager:
    """ä»£ç†äººå·¥å…·ç®¡ç†å™¨"""

    def __init__(self):
        self.available_tools = {
            "market_mcp": MarketMCPTool(),
            "websearch": WebSearchTool(),
            "research_agent": ResearchAgentTool(),
            "fund_validator": FundValidatorTool(),
            "time_validator": TimeValidatorTool(),
            "risk_calculator": RiskCalculatorTool(),
            "portfolio_manager": PortfolioManagerTool(),
            "strategy_advisor": StrategyAdvisorTool()
        }

    def configure_agent_tools(self, agent: Agent, tool_config: List[Dict[str, Any]]):
        """ç‚ºä»£ç†äººé…ç½®å·¥å…·"""
        for config in tool_config:
            tool_name = config["tool_name"]
            if tool_name in self.available_tools and config["enabled"]:
                tool = self.available_tools[tool_name]
                tool.configure(config.get("config", {}))
                agent.add_tool(tool)

class MarketMCPTool:
    """Market MCP Server å·¥å…·åŒ…è£"""

    def __init__(self):
        self.name = "market_data"
        self.description = "å°ç£è‚¡ç¥¨å¸‚å ´æ•¸æ“šæŸ¥è©¢èˆ‡äº¤æ˜“åŸ·è¡Œ"

    async def get_stock_price(self, symbol: str) -> dict:
        """å–å¾—è‚¡ç¥¨å³æ™‚åƒ¹æ ¼"""
        # å‘¼å«ç¾æœ‰çš„ market-mcp-server
        pass

    async def execute_trade(self, symbol: str, action: str, quantity: int) -> dict:
        """åŸ·è¡Œè‚¡ç¥¨äº¤æ˜“"""
        # æ•´åˆäº¤æ˜“é©—è­‰èˆ‡åŸ·è¡Œé‚è¼¯
        pass

class WebSearchTool:
    """ç¶²è·¯æœå°‹å·¥å…·"""

    def __init__(self):
        self.name = "web_search"
        self.description = "æœå°‹ç¶²è·¯ä¸Šçš„è‚¡å¸‚ç›¸é—œè³‡è¨Š"

    async def search_market_news(self, query: str) -> List[dict]:
        """æœå°‹å¸‚å ´æ–°èž"""
        pass

    async def search_company_info(self, symbol: str) -> dict:
        """æœå°‹å…¬å¸åŸºæœ¬è³‡è¨Š"""
        pass
```

#### 3.2 äº¤æ˜“æ™‚é–“èˆ‡è³‡é‡‘é©—è­‰å·¥å…·

```python
import pytz
from datetime import datetime, time

class TimeValidatorTool:
    """äº¤æ˜“æ™‚é–“é©—è­‰å·¥å…·"""

    def __init__(self):
        self.taiwan_tz = pytz.timezone('Asia/Taipei')
        self.trading_start = time(9, 0)    # 09:00
        self.trading_end = time(13, 30)    # 13:30
        self.trading_days = [0, 1, 2, 3, 4]  # é€±ä¸€åˆ°é€±äº”

    async def validate_trading_time(self) -> dict:
        """é©—è­‰ç•¶å‰æ˜¯å¦ç‚ºäº¤æ˜“æ™‚é–“"""
        now = datetime.now(self.taiwan_tz)

        is_trading_day = now.weekday() in self.trading_days
        is_trading_hours = self.trading_start <= now.time() <= self.trading_end

        return {
            "is_valid": is_trading_day and is_trading_hours,
            "current_time": now.isoformat(),
            "is_trading_day": is_trading_day,
            "is_trading_hours": is_trading_hours,
            "next_trading_session": self._get_next_trading_session(now)
        }

class FundValidatorTool:
    """è³‡é‡‘é©—è­‰å·¥å…·"""

    async def validate_purchase_funds(self, agent_id: str, symbol: str,
                                    quantity: int, price: float) -> dict:
        """é©—è­‰è²·å…¥è³‡é‡‘æ˜¯å¦å……è¶³"""
        # è¨ˆç®—æ‰€éœ€è³‡é‡‘ï¼ˆå«æ‰‹çºŒè²»ï¼‰
        total_cost = quantity * price * 1.002  # 0.2% æ‰‹çºŒè²»

        # æŸ¥è©¢ä»£ç†äººç¾é‡‘é¤˜é¡
        portfolio = await self.get_agent_portfolio(agent_id)
        cash_balance = portfolio.cash_balance

        return {
            "is_sufficient": cash_balance >= total_cost,
            "required_amount": total_cost,
            "available_cash": cash_balance,
            "shortfall": max(0, total_cost - cash_balance)
        }
```

### 3. éƒ¨ç½²é…ç½®

```yaml
# docker-compose.yml
version: "3.8"
services:
  web:
    build: .
    ports:
      - "8000:8000"
    environment:
      - DATABASE_URL=sqlite:///./accounts.db
    volumes:
      - ./data:/app/data
```

---

## ðŸ“Š æ•ˆèƒ½èˆ‡ç›£æŽ§

### 1. æ•ˆèƒ½æŒ‡æ¨™

- **WebSocket å»¶é²**: < 100ms
- **API éŸ¿æ‡‰æ™‚é–“**: < 500ms
- **ä¸¦ç™¼ç”¨æˆ¶**: æ”¯æ´ 100+ åŒæ™‚é€£ç·š
- **è³‡æ–™æ›´æ–°é »çŽ‡**: æ¯ 5 ç§’ä¸€æ¬¡

### 2. ç›£æŽ§æ©Ÿåˆ¶

- **æ‡‰ç”¨ç¨‹å¼ç›£æŽ§**: è¨˜éŒ„ API å‘¼å«å’ŒéŒ¯èª¤
- **AI ä»£ç†äººç›£æŽ§**: è¿½è¹¤æ±ºç­–æ™‚é–“å’ŒæˆåŠŸçŽ‡
- **äº¤æ˜“ç›£æŽ§**: è¨˜éŒ„æ‰€æœ‰äº¤æ˜“æ“ä½œ
- **ç³»çµ±è³‡æºç›£æŽ§**: CPUã€è¨˜æ†¶é«”ä½¿ç”¨æƒ…æ³

### 3. éŒ¯èª¤è™•ç†

- **API éŒ¯èª¤**: æ¨™æº–åŒ–éŒ¯èª¤éŸ¿æ‡‰æ ¼å¼
- **WebSocket æ–·ç·š**: è‡ªå‹•é‡é€£æ©Ÿåˆ¶
- **AI ä»£ç†äººéŒ¯èª¤**: å„ªé›…é™ç´šå’ŒéŒ¯èª¤å ±å‘Š
- **è³‡æ–™åº«éŒ¯èª¤**: äº‹å‹™å›žæ»¾å’Œè³‡æ–™ä¸€è‡´æ€§

---

## ðŸ”’ å®‰å…¨æ€§è€ƒé‡

### 1. è³‡æ–™å®‰å…¨

- **è¼¸å…¥é©—è­‰**: æ‰€æœ‰ç”¨æˆ¶è¼¸å…¥é€²è¡Œé©—è­‰
- **SQL æ³¨å…¥é˜²è­·**: ä½¿ç”¨åƒæ•¸åŒ–æŸ¥è©¢
- **XSS é˜²è­·**: è¼¸å‡ºç·¨ç¢¼å’Œ CSP è¨­å®š

### 2. API å®‰å…¨

- **CORS è¨­å®š**: é™åˆ¶å…è¨±çš„ä¾†æº
- **Rate Limiting**: API å‘¼å«é »çŽ‡é™åˆ¶
- **é©—è­‰æ©Ÿåˆ¶**: åŸºæœ¬çš„èº«ä»½é©—è­‰ï¼ˆæœªä¾†æ“´å±•ï¼‰

### 3. è³‡æ–™éš±ç§

- **æ—¥èªŒç®¡ç†**: ä¸è¨˜éŒ„æ•æ„Ÿè³‡è¨Š
- **è³‡æ–™æ¸…ç†**: å®šæœŸæ¸…ç†éŽæœŸè³‡æ–™
- **å‚™ä»½ç­–ç•¥**: å®šæœŸå‚™ä»½é‡è¦è³‡æ–™

---

## ðŸ“„ é™„éŒ„

### A. åƒè€ƒè³‡æ–™

- [FastAPI å®˜æ–¹æ–‡æª”](https://fastapi.tiangolo.com/)
- [Chart.js å®˜æ–¹æŒ‡å—](https://www.chartjs.org/docs/)
- [WebSocket API è¦ç¯„](https://websockets.spec.whatwg.org/)
- [å°ç£è­‰äº¤æ‰€ API](https://www.twse.com.tw/)

### B. è¡“èªžå®šç¾©

- **AI ä»£ç†äºº**: ä½¿ç”¨äººå·¥æ™ºèƒ½é€²è¡Œäº¤æ˜“æ±ºç­–çš„è‡ªå‹•åŒ–ç¨‹å¼
- **MCP**: Model Context Protocolï¼Œç”¨æ–¼æ¨¡åž‹é–“é€šä¿¡çš„å”è­°
- **WebSocket**: é›™å‘é€šä¿¡å”è­°ï¼Œç”¨æ–¼å³æ™‚è³‡æ–™æŽ¨é€
- **Chart.js**: JavaScript åœ–è¡¨åº«

### C. è®Šæ›´è¨˜éŒ„

| ç‰ˆæœ¬ | æ—¥æœŸ       | è®Šæ›´å…§å®¹ | ä½œè€…   |
| ---- | ---------- | -------- | ------ |
| 1.0  | 2025-01-10 | åˆå§‹ç‰ˆæœ¬ | Claude |

---

**æ–‡ä»¶ç‹€æ…‹**: ðŸ”„ å¾…ç¢ºèª
**ä¸‹ä¸€æ­¥**: ç­‰å¾…ç¢ºèªå¾Œé–‹å§‹ Phase 1 é–‹ç™¼
